<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Zycin | GeekBlog</title>
<meta name="description" content="ä¸å¿˜åˆå¿ƒ  æ–¹å¾—å§‹ç»ˆ" />
<link rel="shortcut icon" href="https://fastt.cn/favicon.ico?v=1573109541766">
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css"> -->
<link rel="stylesheet" href="https://unpkg.zhimg.com/katex@0.10.0/dist/katex.min.css" />
<link href="https://cdn.remixicon.com/releases/v1.3.1/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">

<link rel="stylesheet" href="https://fastt.cn/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Zycin | GeekBlog - Atom Feed" href="https://fastt.cn/atom.xml">


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150684183-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150684183-1');
</script>


  </head>
  <body>
    <div id="app" class="main px-4 flex flex-col lg:flex-row">
      <div id="sidebar" class="sidebar-wrapper lg:static lg:w-1/4">
  <div class="lg:sticky top-0">
    <div class="sidebar-content">
      <div class="flex lg:block p-4 lg:px-0 items-center fixed lg:static lg:block top-0 right-0 left-0 bg-white z-50">
        <i class="remixicon-menu-2-line lg:mt-4 text-2xl cursor-pointer animated fadeIn" onclick="openMenu()"></i>
        <a href="https://fastt.cn">
          <img class="animated fadeInLeft avatar rounded-lg mx-4 lg:mt-32 lg:mx-0 mt-0 lg:w-24 lg:h-24 w-12 w-12" src="https://fastt.cn/images/avatar.png?v=1573109541766" alt="">
        </a>
        <h1 class="animated fadeInLeft lg:text-4xl font-extrabold lg:mt-8 mt-0 text-xl" style="animation-delay: 0.2s">Zycin | GeekBlog</h1>
      </div>
      
        <div class="animated fadeInLeft" style="animation-delay: 0.4s">
          <p class="my-4 text-gray-600 font-light hidden lg:block">
            æ–‡ç« ç›®å½•
          </p>
          <div class="toc-container hidden lg:block">
            <ul class="markdownIt-TOC">
<li><a href="#%E4%B8%80-grunt">ä¸€ã€ Grunt</a>
<ul>
<li><a href="#1grunt%E7%AE%80%E4%BB%8B">1ï¼gruntç®€ä»‹</a></li>
<li><a href="#2%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8">2ï¼å¿«é€Ÿå…¥é—¨</a>
<ul>
<li><a href="#1-%E5%85%A8%E5%B1%80%E5%AE%89%E8%A3%85-grunt-cli">1)  å…¨å±€å®‰è£… grunt-cli</a></li>
<li><a href="#2-%E6%9C%AC%E5%9C%B0%E5%AE%89%E8%A3%85grunt">2)  æœ¬åœ°å®‰è£…grunt</a></li>
<li><a href="#3gruntfile%E6%96%87%E4%BB%B6">3)	Gruntfileæ–‡ä»¶</a></li>
<li><a href="#wrapper-%E5%87%BD%E6%95%B0">&quot;wrapper&quot; å‡½æ•°</a></li>
<li><a href="#%E9%A1%B9%E7%9B%AE%E5%92%8C%E4%BB%BB%E5%8A%A1%E9%85%8D%E7%BD%AE">é¡¹ç›®å’Œä»»åŠ¡é…ç½®</a></li>
<li><a href="#%E5%8A%A0%E8%BD%BD-grunt-%E6%8F%92%E4%BB%B6%E5%92%8C%E4%BB%BB%E5%8A%A1">åŠ è½½ Grunt æ’ä»¶å’Œä»»åŠ¡</a></li>
<li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BB%BB%E5%8A%A1">è‡ªå®šä¹‰ä»»åŠ¡</a></li>
</ul>
</li>
<li><a href="#3%E6%8F%92%E4%BB%B6%E4%BB%8B%E7%BB%8D">3ï¼æ’ä»¶ä»‹ç»</a>
<ul>
<li><a href="#4%E5%90%88%E5%B9%B6js-concat">4)	åˆå¹¶js: concat</a></li>
<li><a href="#5%E5%8E%8B%E7%BC%A9js-uglify">5)	å‹ç¼©js: uglify</a></li>
<li><a href="#6js%E8%AF%AD%E6%B3%95%E6%A3%80%E6%9F%A5-jshint">6)	jsè¯­æ³•æ£€æŸ¥: jshint</a></li>
<li><a href="#7%E5%8E%8B%E7%BC%A9csscssmin">7)	å‹ç¼©cssï¼šcssmin</a></li>
<li><a href="#8watch%E8%87%AA%E5%8A%A8%E5%8C%96%E7%9B%91%E5%90%AC">8)	watchè‡ªåŠ¨åŒ–ç›‘å¬</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E4%BA%8C-gulp">äºŒã€	Gulp</a>
<ul>
<li><a href="#4%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8">4ï¼å¿«é€Ÿå…¥é—¨</a>
<ul>
<li><a href="#9node%E7%8E%AF%E5%A2%83%E6%A3%80%E6%B5%8B">9)	Nodeç¯å¢ƒæ£€æµ‹</a></li>
<li><a href="#10%E6%90%AD%E5%BB%BA%E6%B5%8B%E8%AF%95%E9%A1%B9%E7%9B%AE">10)	æ­å»ºæµ‹è¯•é¡¹ç›®</a></li>
<li><a href="#11%E5%AE%89%E8%A3%85gulp">11)	å®‰è£…gulp</a></li>
<li><a href="#12%E5%88%9B%E5%BB%BAgulpfile%E6%96%87%E4%BB%B6">12)	åˆ›å»ºgulpfileæ–‡ä»¶</a></li>
</ul>
</li>
<li><a href="#5%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6">5ï¼ä½¿ç”¨æ’ä»¶</a>
<ul>
<li><a href="#13node%E8%BD%AC%E6%8D%A2%E6%B5%81">13)	Nodeè½¬æ¢æµ</a></li>
<li><a href="#14%E5%B8%B8%E7%94%A8%E6%8F%92%E4%BB%B6%E5%88%97%E8%A1%A8">14)	å¸¸ç”¨æ’ä»¶åˆ—è¡¨</a>
<ul>
<li><a href="#css%E7%9B%B8%E5%85%B3%E7%9A%84%E6%8F%92%E4%BB%B6">CSSç›¸å…³çš„æ’ä»¶</a></li>
<li><a href="#html%E7%9B%B8%E5%85%B3%E6%8F%92%E4%BB%B6">HTMLç›¸å…³æ’ä»¶</a></li>
<li><a href="#%E5%9B%BE%E7%89%87%E7%9B%B8%E5%85%B3%E6%8F%92%E4%BB%B6">å›¾ç‰‡ç›¸å…³æ’ä»¶</a></li>
<li><a href="#requirejs%E6%A8%A1%E5%9D%97%E4%BC%98%E5%8C%96">requirejsæ¨¡å—ä¼˜åŒ–</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#6%E9%9D%9E%E6%8F%92%E4%BB%B6%E5%BA%94%E7%94%A8">6ï¼éæ’ä»¶åº”ç”¨</a>
<ul>
<li><a href="#15gulpif%E6%9D%A1%E4%BB%B6%E6%8F%92%E4%BB%B6">15)	gulpifæ¡ä»¶æ’ä»¶</a></li>
<li><a href="#16through2%E5%86%85%E8%81%94%E6%8F%92%E4%BB%B6">16)	through2å†…è”æ’ä»¶</a></li>
</ul>
</li>
<li><a href="#7%E5%88%9B%E5%BB%BA%E4%BB%BB%E5%8A%A1">7ï¼åˆ›å»ºä»»åŠ¡</a>
<ul>
<li><a href="#17%E5%AF%BC%E5%87%BA%E4%BB%BB%E5%8A%A1">17)	å¯¼å‡ºä»»åŠ¡</a></li>
<li><a href="#18%E7%BB%84%E5%90%88%E4%BB%BB%E5%8A%A1">18)	ç»„åˆä»»åŠ¡</a></li>
</ul>
</li>
<li><a href="#8%E5%BC%82%E6%AD%A5%E6%89%A7%E8%A1%8C">8ï¼å¼‚æ­¥æ‰§è¡Œ</a>
<ul>
<li><a href="#19%E4%BB%BB%E5%8A%A1%E5%AE%8C%E6%88%90%E9%80%9A%E7%9F%A5">19)	ä»»åŠ¡å®Œæˆé€šçŸ¥</a></li>
<li><a href="#20%E8%BF%94%E5%9B%9E%E5%80%BC%E7%B1%BB%E5%9E%8B">20)	è¿”å›å€¼ç±»å‹</a></li>
</ul>
</li>
<li><a href="#9global%E8%AF%A6%E8%A7%A3">9ï¼globalè¯¦è§£</a>
<ul>
<li><a href="#21%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%89%87%E6%AE%B5%E4%B8%8E%E5%88%86%E9%9A%94%E7%AC%A6">21)	å­—ç¬¦ä¸²ç‰‡æ®µä¸åˆ†éš”ç¬¦</a></li>
<li><a href="#22%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6-%E4%B8%80%E4%B8%AA%E6%98%9F%E5%8F%B7">22)	ç‰¹æ®Šå­—ç¬¦ï¼š * (ä¸€ä¸ªæ˜Ÿå·)</a></li>
<li><a href="#23%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6-%E4%B8%A4%E4%B8%AA%E6%98%9F%E5%8F%B7">23)	ç‰¹æ®Šå­—ç¬¦ï¼š ** (ä¸¤ä¸ªæ˜Ÿå·)</a></li>
<li><a href="#24%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6-%E5%8F%96%E5%8F%8D">24)	ç‰¹æ®Šå­—ç¬¦ï¼š ! (å–å)</a></li>
</ul>
</li>
<li><a href="#10%E7%9B%91%E5%90%AC%E7%8A%B6%E6%80%81">10ï¼ç›‘å¬çŠ¶æ€</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      
    </div>
  </div>
</div>

<div class="menu-container">
  <i class="remixicon-arrow-left-line text-2xl cursor-pointer animated fadeIn close-menu-btn" onclick="closeMenu()"></i>
  <div>
    
      
        <a href="/" class="menu" style="animation-delay: 0s">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu" style="animation-delay: 0.2s">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu" style="animation-delay: 0.4s">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu" style="animation-delay: 0.6000000000000001s">
          å…³äº
        </a>
      
    
  </div>
  <div class="site-footer">
    <div class="py-4 text-gray-700"><div
			class="animated fadeInLeft social-container"
			style="animation-delay: 0.6s"
		>
			<a
				href="https://github.com/zycin/"
				target="_blank"
				class="text-xl text-gray-400 font-light hover:text-gray-900"
			>
				<i class="remixicon-github-line"></i>
			</a>

			<a
				href="http://wpa.qq.com/msgrd?v=3&amp;uin=785227561&amp;site=qq&amp;menu=yes"
				target="_blank"
				class="text-xl text-gray-400 font-light hover:text-gray-900"
			>
				<i class="remixicon-qq-line"></i>
			</a>
		</div>

Powered by <a href="https://github.com/zycin" target="_blank">Zycin</a></div>
    <a class="rss" href="https://fastt.cn/atom.xml" target="_blank">RSS</a>
  </div>
</div>
<div class="mask" onclick="closeMenu()">
</div>
      <div class="content-wrapper py-32 lg:p-8 lg:w-3/4 post-detail animated fadeIn">
        <h1 class="text-3xl font-bold lg:mt-16">è‡ªåŠ¨åŒ–æ„å»º</h1>
        <div class="text-sm text-gray-700 lg:my-8">
          2019-10-26 / 28 min read
        </div>
        
          <img class="post-feature-image rounded-lg mx-auto my-4" src="https://fastt-1252391792.file.myqcloud.com/builder.jpg" alt="">
        
        <div class="post-content yue">
          <p>å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·  <code>grunt</code>å’Œ<code>gulp</code>çš„ä½¿ç”¨<br>
begin enjoyğŸ‘‡</p>
<!-- more -->
<h1 id="ä¸€-grunt">ä¸€ã€ Grunt</h1>
<h2 id="1gruntç®€ä»‹">1ï¼gruntç®€ä»‹</h2>
<p>gruntæ˜¯ä¸€ä¸ªåŸºäºnodeJSçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œé€šè¿‡å…¶ä¸°å¯Œè€Œå¼ºå¤§çš„æ’ä»¶æ‰§è¡Œä¸€ç³»åˆ—ä¸å‰ç«¯è‡ªåŠ¨åŒ–æ„å»ºç›¸å…³ä»»åŠ¡ï¼Œä¾‹å¦‚ï¼šæ–‡ä»¶åˆå¹¶ã€å‹ç¼©ã€è„šæœ¬éªŒè¯ã€lesså’Œsassé¢„ç¼–è¯‘ç­‰ã€‚ä½¿ç”¨gruntå¯ä»¥å®ç°é¡¹ç›®æ›´å¯é çš„è¿è¡Œï¼Œæœ‰æ•ˆæå‡é¡¹ç›®éƒ¨ç½²çš„æ•ˆç‡ã€‚</p>
<p>gruntåŸºäºnodejsï¼Œå®ƒä½¿ç”¨CMDçš„æ¨¡å—åŠ è½½æœºåˆ¶å¹¶ä¸”ä½¿ç”¨npmåº“ä¸­çš„gruntæ’ä»¶ï¼Œæ‰€æœ‰gruntç”Ÿæ€æ’ä»¶éƒ½ä»¥åŒ…çš„å½¢å¼å‘å¸ƒåˆ°äº†npmå¹³å°ã€‚gruntæ’ä»¶åŒ…ä»¥<code>grunt-contrib-</code>å’Œ<code>grunt-</code>å¼€å¤´ï¼Œå‰è€…ä¸ºgruntå®˜æ–¹å‘å¸ƒçš„æ’ä»¶åŒ…ï¼Œåè€…åˆ™ä¸ºç¬¬ä¸‰æ–¹ç”¨æˆ·ç¼–å†™çš„åŒ…ã€‚</p>
<p>ä½¿ç”¨å‰æ£€æŸ¥é¡¹ç›®ç¯å¢ƒä¸­æ˜¯å¦æœ‰å®‰è£…çš„nodeç¯å¢ƒï¼š<code>node -v</code></p>
<h2 id="2å¿«é€Ÿå…¥é—¨">2ï¼å¿«é€Ÿå…¥é—¨</h2>
<p>ä½¿ç”¨gruntå‰ï¼Œéœ€åˆ›å»ºä¸€ä¸ªç®€å•çš„æµ‹è¯•ç”¨ä¾‹ï¼šgrunt_appã€‚ç›®å½•æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code>|- dist----------ç›®æ ‡æ–‡ä»¶å¤¹
|- src------------æºç æ–‡ä»¶å¤¹   
    |- js---------------jsæºæ–‡ä»¶å¤¹
    |- css--------------cssæºæ–‡ä»¶å¤¹
|- index.html-----æµ‹è¯•æ–‡ä»¶
|- Gruntfile.js---grunté…ç½®æ–‡ä»¶(æ³¨æ„é¦–å­—æ¯å¤§å†™)
|- package.json---é¡¹ç›®åŒ…é…ç½®æ–‡ä»¶
</code></pre>
<h3 id="1-å…¨å±€å®‰è£…-grunt-cli">1)  å…¨å±€å®‰è£… grunt-cli</h3>
<p>ä½ éœ€è¦å…ˆå°†Gruntå‘½ä»¤è¡Œï¼ˆCLIï¼‰å®‰è£…åˆ°å…¨å±€ç¯å¢ƒä¸­ã€‚å®‰è£…æ—¶å¯èƒ½éœ€è¦ä½¿ç”¨sudoï¼ˆé’ˆå¯¹OSXã€*nixã€BSDç­‰ç³»ç»Ÿä¸­ï¼‰æƒé™æˆ–è€…ä½œä¸ºç®¡ç†å‘˜ï¼ˆå¯¹äºWindowsç¯å¢ƒï¼‰æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="language-shell">npm install -g grunt-cli
</code></pre>
<p>ä¸Šè¿°å‘½ä»¤æ‰§è¡Œå®Œåï¼Œ<code>grunt</code> å‘½ä»¤å°±è¢«åŠ å…¥åˆ°ä½ çš„ç³»ç»Ÿè·¯å¾„ä¸­äº†ï¼Œä»¥åå°±å¯ä»¥åœ¨ä»»ä½•ç›®å½•ä¸‹æ‰§è¡Œæ­¤å‘½ä»¤äº†ã€‚<br>
æ³¨æ„ï¼Œå®‰è£…<code>grunt-cli</code>å¹¶ä¸ç­‰äºå®‰è£…äº† Gruntï¼Grunt CLIçš„ä»»åŠ¡å¾ˆç®€å•ï¼šè°ƒç”¨ä¸<code>Gruntfile</code>åœ¨åŒä¸€ç›®å½•ä¸­çš„Gruntã€‚è¿™æ ·å¸¦æ¥çš„å¥½å¤„æ˜¯å…è®¸ä½ åœ¨åŒä¸€ä¸ªç³»ç»Ÿä¸ŠåŒæ—¶å®‰è£…å¤šä¸ªç‰ˆæœ¬çš„ Gruntã€‚</p>
<p>æ¯æ¬¡è¿è¡Œ<code>grunt</code> æ—¶ï¼Œä»–å°±åˆ©ç”¨nodeæä¾›çš„<code>require()</code>ç³»ç»ŸæŸ¥æ‰¾æœ¬åœ°å®‰è£…çš„ Gruntã€‚æ­£æ˜¯ç”±äºè¿™ä¸€æœºåˆ¶ï¼Œä½ å¯ä»¥åœ¨é¡¹ç›®çš„ä»»æ„å­ç›®å½•ä¸­è¿è¡Œ<code>grunt</code> ã€‚<br>
å¦‚æœæ‰¾åˆ°ä¸€ä»½æœ¬åœ°å®‰è£…çš„ Gruntï¼ŒCLIå°±å°†å…¶åŠ è½½ï¼Œå¹¶ä¼ é€’<code>Gruntfile</code>ä¸­çš„é…ç½®ä¿¡æ¯ï¼Œç„¶åæ‰§è¡Œä½ æ‰€æŒ‡å®šçš„ä»»åŠ¡ã€‚</p>
<h3 id="2-æœ¬åœ°å®‰è£…grunt">2)  æœ¬åœ°å®‰è£…grunt</h3>
<p>æœ¬åœ°å®‰è£…gruntï¼Œå¹¶è¿è¡Œæ„å»ºé¡¹ç›®å‘½ä»¤ã€‚åˆå§‹åŒ–è¿è¡ŒgruntæŒ‡ä»¤ï¼Œä¼šæç¤ºWarning: Task &quot;default&quot; not foundã€‚éœ€è¦åœ¨æ ¹åœ°å€ä¸­æ·»åŠ <code>Grantfile.js</code>æ–‡ä»¶å¹¶é…ç½®defaultä»»åŠ¡ã€‚</p>
<pre><code class="language-shell">npm install grunt --save-dev
grunt
</code></pre>
<h3 id="3gruntfileæ–‡ä»¶">3)	Gruntfileæ–‡ä»¶</h3>
<p><code>Gruntfile.js</code> æˆ– <code>Gruntfile.coffee</code> æ–‡ä»¶æ˜¯æœ‰æ•ˆçš„ JavaScript æˆ– CoffeeScript æ–‡ä»¶ï¼Œåº”å½“æ”¾åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œå’Œ<code>package.json</code>æ–‡ä»¶åœ¨åŒä¸€ç›®å½•å±‚çº§ï¼Œå¹¶å’Œé¡¹ç›®æºç ä¸€èµ·åŠ å…¥æºç ç®¡ç†å™¨ã€‚<br>
Gruntfileç”±ä»¥ä¸‹å‡ éƒ¨åˆ†æ„æˆï¼š</p>
<ul>
<li>
<p>&quot;wrapper&quot; å‡½æ•°</p>
</li>
<li>
<p>é¡¹ç›®ä¸ä»»åŠ¡é…ç½®</p>
</li>
<li>
<p>åŠ è½½gruntæ’ä»¶å’Œä»»åŠ¡</p>
</li>
<li>
<p>è‡ªå®šä¹‰ä»»åŠ¡<br>
åœ¨ä¸‹é¢åˆ—å‡ºçš„è¿™ä¸ª <code>Gruntfile</code> ä¸­ï¼Œ<code>package.json</code>æ–‡ä»¶ä¸­çš„é¡¹ç›®å…ƒæ•°æ®ï¼ˆmetadataï¼‰è¢«å¯¼å…¥åˆ° Grunt é…ç½®ä¸­ï¼Œ <a href="https://github.com/gruntjs/grunt-contrib-uglify">grunt-contrib-uglify</a> æ’ä»¶ä¸­çš„<code>uglify</code> ä»»åŠ¡ï¼ˆtaskï¼‰è¢«é…ç½®ä¸ºå‹ç¼©ï¼ˆminifyï¼‰æºç æ–‡ä»¶å¹¶ä¾æ®ä¸Šè¿°å…ƒæ•°æ®åŠ¨æ€ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å¤´æ³¨é‡Šã€‚å½“åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ <code>grunt</code> å‘½ä»¤æ—¶ï¼Œ<code>uglify</code> ä»»åŠ¡å°†è¢«é»˜è®¤æ‰§è¡Œã€‚</p>
</li>
</ul>
<pre><code class="language-js">module.exports = function(grunt) {
  // Project configuration.
  grunt.initConfig({
    pkg: grunt.file.readJSON('package.json'),
    uglify: {
      options: {
        banner: '/*! &lt;%= pkg.name %&gt; &lt;%= grunt.template.today(&quot;yyyy-mm-dd&quot;) %&gt; */\n'
      },
      build: {
        src: 'src/&lt;%= pkg.name %&gt;.js',
        dest: 'build/&lt;%= pkg.name %&gt;.min.js'
      }
    }
  });

  // åŠ è½½åŒ…å« &quot;uglify&quot; ä»»åŠ¡çš„æ’ä»¶ã€‚
  grunt.loadNpmTasks('grunt-contrib-uglify');

  // é»˜è®¤è¢«æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ã€‚
  grunt.registerTask('default', ['uglify']);

};
</code></pre>
<p>å‰é¢å·²ç»å‘ä½ å±•ç¤ºäº†æ•´ä¸ª <code>Gruntfile</code>ï¼Œæ¥ä¸‹æ¥å°†è¯¦ç»†è§£é‡Šå…¶ä¸­çš„æ¯ä¸€éƒ¨åˆ†ã€‚</p>
<h3 id="wrapper-å‡½æ•°">&quot;wrapper&quot; å‡½æ•°</h3>
<p>æ¯ä¸€ä»½ <code>Gruntfile</code> ï¼ˆå’Œgruntæ’ä»¶ï¼‰éƒ½éµå¾ªåŒæ ·çš„æ ¼å¼ï¼Œä½ æ‰€ä¹¦å†™çš„Gruntä»£ç å¿…é¡»æ”¾åœ¨æ­¤å‡½æ•°å†…ï¼š</p>
<pre><code class="language-js">module.exports = function(grunt) {
  // Do grunt-related things in here
};
</code></pre>
<h3 id="é¡¹ç›®å’Œä»»åŠ¡é…ç½®">é¡¹ç›®å’Œä»»åŠ¡é…ç½®</h3>
<p>å¤§éƒ¨åˆ†çš„Gruntä»»åŠ¡éƒ½ä¾èµ–æŸäº›é…ç½®æ•°æ®ï¼Œè¿™äº›æ•°æ®è¢«å®šä¹‰åœ¨ä¸€ä¸ªobjectå†…ï¼Œå¹¶ä¼ é€’ç»™<a href="https://www.gruntjs.net/grunt#grunt.initconfig">grunt.initConfig</a> æ–¹æ³•ã€‚</p>
<p>åœ¨ä¸‹é¢çš„æ¡ˆä¾‹ä¸­ï¼Œ<code>grunt.file.readJSON('package.json')</code> å°†å­˜å‚¨åœ¨<code>package.json</code>æ–‡ä»¶ä¸­çš„JSONå…ƒæ•°æ®å¼•å…¥åˆ°grunt configä¸­ã€‚ ç”±äº<code>&lt;% %&gt;</code>æ¨¡æ¿å­—ç¬¦ä¸²å¯ä»¥å¼•ç”¨ä»»æ„çš„é…ç½®å±æ€§ï¼Œå› æ­¤å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥æŒ‡å®šè¯¸å¦‚æ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶åˆ—è¡¨ç±»å‹çš„é…ç½®æ•°æ®ï¼Œä»è€Œå‡å°‘ä¸€äº›é‡å¤çš„å·¥ä½œã€‚</p>
<p>ä½ å¯ä»¥åœ¨è¿™ä¸ªé…ç½®å¯¹è±¡ä¸­(ä¼ é€’ç»™initConfig()æ–¹æ³•çš„å¯¹è±¡)å­˜å‚¨ä»»æ„çš„æ•°æ®ï¼Œåªè¦å®ƒä¸ä¸ä½ ä»»åŠ¡é…ç½®æ‰€éœ€çš„å±æ€§å†²çªï¼Œå¦åˆ™ä¼šè¢«å¿½ç•¥ã€‚æ­¤å¤–ï¼Œç”±äºè¿™æœ¬èº«å°±æ˜¯JavaScriptï¼Œä½ ä¸ä»…é™äºä½¿ç”¨JSONï¼›ä½ å¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨ä»»æ„çš„æœ‰æ•ˆçš„JSä»£ç ã€‚å¦‚æœæœ‰å¿…è¦ï¼Œä½ ç”šè‡³å¯ä»¥ä»¥ç¼–ç¨‹çš„æ–¹å¼ç”Ÿæˆé…ç½®ã€‚</p>
<p>ä¸å¤§å¤šæ•°taskä¸€æ ·ï¼Œ<a href="https://github.com/gruntjs/grunt-contrib-uglify">grunt-contrib-uglify</a> æ’ä»¶ä¸­çš„<code>uglify</code> ä»»åŠ¡è¦æ±‚å®ƒçš„é…ç½®è¢«æŒ‡å®šåœ¨ä¸€ä¸ªåŒåå±æ€§ä¸­ã€‚åœ¨è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­, æˆ‘ä»¬æŒ‡å®šäº†ä¸€ä¸ª<code>banner</code>é€‰é¡¹(ç”¨äºåœ¨æ–‡ä»¶é¡¶éƒ¨ç”Ÿæˆä¸€ä¸ªæ³¨é‡Š)ï¼Œç´§æ¥ç€æ˜¯ä¸€ä¸ªå•ä¸€çš„åä¸º<code>build</code>çš„uglifyç›®æ ‡ï¼Œç”¨äºå°†ä¸€ä¸ªjsæ–‡ä»¶å‹ç¼©ä¸ºä¸€ä¸ªç›®æ ‡æ–‡ä»¶ã€‚</p>
<pre><code class="language-js">// Project configuration.
grunt.initConfig({
  pkg: grunt.file.readJSON('package.json'),
  uglify: {
    options: {
      banner: '/*! &lt;%= pkg.name %&gt; &lt;%= grunt.template.today(&quot;yyyy-mm-dd&quot;) %&gt; */\n'
    },
    build: {
      src: 'src/&lt;%= pkg.name %&gt;.js',
      dest: 'build/&lt;%= pkg.name %&gt;.min.js'
    }
  }
});
</code></pre>
<h3 id="åŠ è½½-grunt-æ’ä»¶å’Œä»»åŠ¡">åŠ è½½ Grunt æ’ä»¶å’Œä»»åŠ¡</h3>
<p>åƒ <a href="https://github.com/gruntjs/grunt-contrib-concat">concatenation</a>ã€[minification]ã€<a href="https://github.com/gruntjs/grunt-contrib-uglify">grunt-contrib-uglify</a> å’Œ <a href="https://github.com/gruntjs/grunt-contrib-jshint">linting</a>è¿™äº›å¸¸ç”¨çš„ä»»åŠ¡ï¼ˆtaskï¼‰éƒ½å·²ç»ä»¥<a href="https://github.com/gruntjs">gruntæ’ä»¶</a>çš„å½¢å¼è¢«å¼€å‘å‡ºæ¥äº†ã€‚åªè¦åœ¨ <code>package.json</code> æ–‡ä»¶ä¸­è¢«åˆ—ä¸ºdependencyï¼ˆä¾èµ–ï¼‰çš„åŒ…ï¼Œå¹¶é€šè¿‡<code>npm install</code>å®‰è£…ä¹‹åï¼Œéƒ½å¯ä»¥åœ¨<code>Gruntfile</code>ä¸­ä»¥ç®€å•å‘½ä»¤çš„å½¢å¼ä½¿ç”¨ï¼š</p>
<pre><code class="language-js">// åŠ è½½èƒ½å¤Ÿæä¾›&quot;uglify&quot;ä»»åŠ¡çš„æ’ä»¶ã€‚
grunt.loadNpmTasks('grunt-contrib-uglify');
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong> <code>grunt --help</code> å‘½ä»¤å°†åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ä»»åŠ¡ã€‚</p>
<h3 id="è‡ªå®šä¹‰ä»»åŠ¡">è‡ªå®šä¹‰ä»»åŠ¡</h3>
<p>é€šè¿‡å®šä¹‰ <code>default</code> ä»»åŠ¡ï¼Œå¯ä»¥è®©Grunté»˜è®¤æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡ã€‚åœ¨ä¸‹é¢çš„è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæ‰§è¡Œ <code>grunt</code> å‘½ä»¤æ—¶å¦‚æœä¸æŒ‡å®šä¸€ä¸ªä»»åŠ¡çš„è¯ï¼Œå°†ä¼šæ‰§è¡Œ<code>uglify</code>ä»»åŠ¡ã€‚è¿™å’Œæ‰§è¡Œ<code>grunt uglify</code> æˆ–è€… <code>grunt default</code>çš„æ•ˆæœä¸€æ ·ã€‚<code>default</code>ä»»åŠ¡åˆ—è¡¨æ•°ç»„ä¸­å¯ä»¥æŒ‡å®šä»»æ„æ•°ç›®çš„ä»»åŠ¡ï¼ˆå¯ä»¥å¸¦å‚æ•°ï¼‰ã€‚</p>
<pre><code class="language-js">// Default task(s).
grunt.registerTask('default', ['uglify']);
</code></pre>
<p>å¦‚æœGruntæ’ä»¶ä¸­çš„ä»»åŠ¡ï¼ˆtaskï¼‰ä¸èƒ½æ»¡è¶³ä½ çš„é¡¹ç›®éœ€æ±‚ï¼Œä½ è¿˜å¯ä»¥åœ¨<code>Gruntfile</code>ä¸­è‡ªå®šä¹‰ä»»åŠ¡ï¼ˆtaskï¼‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ <code>Gruntfile</code> ä¸­è‡ªå®šä¹‰äº†ä¸€ä¸ª<code>default</code> ä»»åŠ¡ï¼Œå¹¶ä¸”ä»–ç”šè‡³ä¸ä¾èµ–ä»»åŠ¡é…ç½®ï¼š</p>
<pre><code class="language-js">module.exports = function(grunt) {

  // A very basic default task.
  grunt.registerTask('default', 'Log some stuff.', function() {
    grunt.log.write('Logging some stuff...').ok();
  });

};
</code></pre>
<p>ç‰¹å®šäºé¡¹ç›®çš„ä»»åŠ¡ä¸å¿…åœ¨ <code>Gruntfile</code> ä¸­å®šä¹‰ã€‚ä»–ä»¬å¯ä»¥å®šä¹‰åœ¨å¤–éƒ¨<code>.js</code> æ–‡ä»¶ä¸­ï¼Œå¹¶é€šè¿‡<a href="https://www.gruntjs.net/grunt/#grunt.loadtasks">grunt.loadTasks</a> æ–¹æ³•åŠ è½½ã€‚</p>
<h2 id="3æ’ä»¶ä»‹ç»">3ï¼æ’ä»¶ä»‹ç»</h2>
<ul>
<li>gruntå®˜ç½‘çš„æ’ä»¶åˆ—è¡¨é¡µé¢ http://www.gruntjs.net/plugins</li>
<li>æ’ä»¶åˆ†ç±»:
<ul>
<li>gruntå›¢é˜Ÿè´¡çŒ®çš„æ’ä»¶ : æ’ä»¶åå¤§éƒ½ä»¥contrib-å¼€å¤´</li>
<li>ç¬¬ä¸‰æ–¹æä¾›çš„æ’ä»¶ : å¤§éƒ½ä¸ä»¥contrib-å¼€å¤´</li>
</ul>
</li>
<li>å¸¸ç”¨çš„æ’ä»¶:
<ul>
<li>grunt-contrib-cleanâ€”â€”æ¸…é™¤æ–‡ä»¶(æ‰“åŒ…å¤„ç†ç”Ÿæˆçš„)</li>
<li>grunt-contrib-concatâ€”â€”åˆå¹¶å¤šä¸ªæ–‡ä»¶çš„ä»£ç åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­</li>
<li>grunt-contrib-uglifyâ€”â€”å‹ç¼©jsæ–‡ä»¶</li>
<li>grunt-contrib-jshintâ€”â€”javascriptè¯­æ³•é”™è¯¯æ£€æŸ¥ï¼›</li>
<li>grunt-contrib-cssminâ€”â€”å‹ç¼©/åˆå¹¶cssæ–‡ä»¶</li>
<li>grunt-contrib-htmlminâ€”â€”å‹ç¼©htmlæ–‡ä»¶</li>
<li>grunt-contrib-imageminâ€”â€”å‹ç¼©å›¾ç‰‡æ–‡ä»¶(æ— æŸ)</li>
<li>grunt-contrib-copyâ€”â€”å¤åˆ¶æ–‡ä»¶ã€æ–‡ä»¶å¤¹</li>
<li><strong>grunt-contrib-requirejs</strong>â€”â€”åˆå¹¶å‹ç¼©requirejsç®¡ç†çš„æ‰€æœ‰jsæ¨¡å—æ–‡ä»¶</li>
<li>grunt-contrib-watchâ€”â€”å®æ—¶ç›‘æ§æ–‡ä»¶å˜åŒ–ã€è°ƒç”¨ç›¸åº”çš„ä»»åŠ¡é‡æ–°æ‰§è¡Œ</li>
</ul>
</li>
</ul>
<h3 id="4åˆå¹¶js-concat">4)	åˆå¹¶js: concat</h3>
<ul>
<li>
<p>å‘½ä»¤:</p>
<pre><code>npm install grunt-contrib-concat --save-dev
</code></pre>
</li>
<li>
<p>ç¼–ç :</p>
<ul>
<li>
<p>src/js/test1.js</p>
<pre><code>(function () {
  function add(num1, num2) {
    return num1 + num2;
  }
  console.log(add(10, 20));
})();
</code></pre>
</li>
</ul>
</li>
<li>
<p>src/js/test2.js</p>
<pre><code>(function () {
  var arr = [2,3,4].map(function (item, index) {
    return item+1;
  });
  console.log(arr);
})();
}
</code></pre>
<ul>
<li>
<p>é…ç½®: Gruntfile.js</p>
<ul>
<li>
<p>é…ç½®ä»»åŠ¡:</p>
<pre><code>concat: {
    options: { //å¯é€‰é¡¹é…ç½®
      separator: ';'   //ä½¿ç”¨;è¿æ¥åˆå¹¶
    },
    build: { //æ­¤åç§°ä»»æ„
      src:  [&quot;src/js/*.js&quot;],  //åˆå¹¶å“ªäº›jsæ–‡ä»¶
      dest: &quot;build/js/built.js&quot; //è¾“å‡ºçš„jsæ–‡ä»¶
    }
  }
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>åŠ è½½æ’ä»¶:</p>
<pre><code>grunt.loadNpmTasks('grunt-contrib-concat');
</code></pre>
<ul>
<li>
<p>æ³¨å†Œä»»åŠ¡:</p>
<pre><code>grunt.registerTask('default', ['concat']);
</code></pre>
</li>
<li>
<p>å‘½ä»¤:</p>
</li>
</ul>
<pre><code>grunt   //ä¼šåœ¨buildä¸‹ç”Ÿæˆä¸€ä¸ªbuilt.js
</code></pre>
</li>
</ul>
<h3 id="5å‹ç¼©js-uglify">5)	å‹ç¼©js: uglify</h3>
<ul>
<li>
<p>ä¸‹è½½</p>
<pre><code>npm install grunt-contrib-uglify --save-dev
</code></pre>
</li>
<li>
<p>é…ç½®: Gruntfile.js</p>
<ul>
<li>
<p>é…ç½®ä»»åŠ¡:</p>
<pre><code>pkg : grunt.file.readJSON('package.json'),
uglify : {
  options: {  //ä¸æ˜¯å¿…é¡»çš„
    banner: '/*! &lt;%= pkg.name %&gt; - v&lt;%= pkg.version %&gt; - ' +
    '&lt;%= grunt.template.today(&quot;yyyy-mm-dd&quot;) %&gt; */'
  },
  build: {
    files: {
      'build/js/built-&lt;%=pkg.name%&gt;-&lt;%=pkg.version%&gt;.min.js': ['build/js/built.js']
    }
  }
}
</code></pre>
</li>
</ul>
</li>
<li>
<p>åŠ è½½ä»»åŠ¡:</p>
<pre><code>grunt.loadNpmTasks('grunt-contrib-uglify');
</code></pre>
<ul>
<li>
<p>æ³¨å†Œä»»åŠ¡:</p>
<pre><code>grunt.registerTask('default', ['concat', 'uglify']);
</code></pre>
</li>
<li>
<p>å‘½ä»¤:</p>
</li>
</ul>
<pre><code>grunt   //ä¼šåœ¨buildä¸‹ç”Ÿæˆä¸€ä¸ªå‹ç¼©çš„jsæ–‡ä»¶
</code></pre>
</li>
</ul>
<h3 id="6jsè¯­æ³•æ£€æŸ¥-jshint">6)	jsè¯­æ³•æ£€æŸ¥: jshint</h3>
<ul>
<li>
<p>å‘½ä»¤:</p>
<pre><code>npm install grunt-contrib-jshint --save-dev
</code></pre>
</li>
<li>
<p>ç¼–ç : .jshintrc</p>
<pre><code>{
  &quot;curly&quot;: true,
  &quot;eqeqeq&quot;: true,
  &quot;eqnull&quot;: true,
  &quot;expr&quot; : true,
  &quot;immed&quot;: true,
  &quot;newcap&quot;: true,
  &quot;noempty&quot;: true,
  &quot;noarg&quot;: true,
  &quot;regexp&quot;: true,
  &quot;browser&quot;: true,
  &quot;devel&quot;: true,
  &quot;node&quot;: true,
  &quot;boss&quot;: false,
  
  //ä¸èƒ½ä½¿ç”¨æœªå®šä¹‰çš„å˜é‡
  &quot;undef&quot;: true,
  //è¯­å¥åé¢å¿…é¡»æœ‰åˆ†å·
  &quot;asi&quot;: false,
  //é¢„å®šä¹‰ä¸æ£€æŸ¥çš„å…¨å±€å˜é‡
  &quot;predef&quot;: [ &quot;define&quot;, &quot;BMap&quot;, &quot;angular&quot;, &quot;BMAP_STATUS_SUCCESS&quot;]
}
</code></pre>
</li>
<li>
<p>ä¿®æ”¹src/js/test1.js</p>
<pre><code>(function () {
  function add(num1, num2) {
    num1 = num1 + num3
    return num1 + num2;
  }
  console.log(add(10, 20));
})();
</code></pre>
</li>
<li>
<p>é…ç½® : Gruntfile.js</p>
<ul>
<li>
<p>é…ç½®ä»»åŠ¡:</p>
<pre><code>jshint : {
  options: {
    jshintrc : '.jshintrc' //æŒ‡å®šé…ç½®æ–‡ä»¶
  },
  build : ['Gruntfile.js', 'src/js/*.js'] //æŒ‡å®šæ£€æŸ¥çš„æ–‡ä»¶
}
</code></pre>
</li>
</ul>
</li>
<li>
<p>åŠ è½½ä»»åŠ¡:</p>
<pre><code>grunt.loadNpmTasks('grunt-contrib-jshint');
</code></pre>
<ul>
<li>
<p>æ³¨å†Œä»»åŠ¡:</p>
<pre><code>grunt.registerTask('default', ['concat', 'uglify', 'jshint']);
</code></pre>
</li>
<li>
<p>å‘½ä»¤:</p>
</li>
</ul>
<pre><code>grunt   //æç¤ºå˜é‡æœªå®šä¹‰å’Œè¯­å¥åæœªåŠ åˆ†å· --&gt;ä¿®æ”¹åé‡æ–°ç¼–è¯‘
</code></pre>
</li>
</ul>
<h3 id="7å‹ç¼©csscssmin">7)	å‹ç¼©cssï¼šcssmin</h3>
<ul>
<li>
<p>å®‰è£…:</p>
<pre><code>npm install grunt-contrib-cssmin --save-dev
</code></pre>
</li>
<li>
<p>ç¼–ç :</p>
<ul>
<li>
<p>test1.css</p>
<pre><code>#box1 {
  width: 100px;
  height: 100px;
  background: red;
}
</code></pre>
</li>
</ul>
</li>
<li>
<p>test2.css</p>
<pre><code>#box2 {
  width: 200px;
  height: 200px;
  background: blue;
}
</code></pre>
<ul>
<li>
<p>index.html</p>
<pre><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;build/css/output.min.css&quot;&gt;
&lt;div id=&quot;box1&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;box2&quot;&gt;&lt;/div&gt;
</code></pre>
</li>
<li>
<p>é…ç½® : Gruntfile.js</p>
<ul>
<li>
<p>é…ç½®ä»»åŠ¡:</p>
<pre><code>cssmin:{
  options: {
    shorthandCompacting: false,
    roundingPrecision: -1
  },
  build: {
    files: {
        'build/css/output.min.css': ['src/css/*.css']
    }
  }
}
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>åŠ è½½ä»»åŠ¡:</p>
<pre><code>grunt.loadNpmTasks('grunt-contrib-cssmin');
</code></pre>
<ul>
<li>
<p>æ³¨å†Œä»»åŠ¡:</p>
<pre><code>grunt.registerTask('default', ['concat', 'uglify', 'jshint', 'cssmin']);
</code></pre>
</li>
<li>
<p>å‘½ä»¤:</p>
</li>
</ul>
<pre><code>grunt    //åœ¨build/css/ä¸‹ç”Ÿæˆoutput.min.css
</code></pre>
</li>
</ul>
<h3 id="8watchè‡ªåŠ¨åŒ–ç›‘å¬">8)	watchè‡ªåŠ¨åŒ–ç›‘å¬</h3>
<ul>
<li>
<p>å‘½ä»¤: npm install grunt-contrib-watch --save-dev</p>
</li>
<li>
<p>é…ç½® : Gruntfile.js</p>
<ul>
<li>
<p>é…ç½®ä»»åŠ¡:</p>
<pre><code>watch : {
  scripts : {
    files : ['src/js/*.js', 'src/css/*.css'],
    tasks : ['concat', 'jshint', 'uglify', 'cssmin'],
    options : {spawn : false}  
  }
}
</code></pre>
</li>
</ul>
</li>
<li>
<p>åŠ è½½ä»»åŠ¡:</p>
<pre><code>grunt.loadNpmTasks('grunt-contrib-watch');
</code></pre>
<ul>
<li>
<p>æ³¨å†Œä»»åŠ¡:</p>
<pre><code>grunt.registerTask('default', ['concat', 'uglify', 'jshint', 'watch']);
æ”¹è¿›ï¼šgrunt.registerTask('myWatch', ['default','watch']);
</code></pre>
</li>
<li>
<p>å‘½ä»¤:</p>
</li>
</ul>
<pre><code>grunt   //æ§åˆ¶å°æç¤ºwatchå·²ç»å¼€å§‹ç›‘å¬, ä¿®æ”¹ä¿å­˜åè‡ªåŠ¨ç¼–è¯‘å¤„ç†
</code></pre>
</li>
</ul>
<h1 id="äºŒ-gulp">äºŒã€	Gulp</h1>
<h2 id="4å¿«é€Ÿå…¥é—¨">4ï¼å¿«é€Ÿå…¥é—¨</h2>
<h3 id="9nodeç¯å¢ƒæ£€æµ‹">9)	Nodeç¯å¢ƒæ£€æµ‹</h3>
<p>å¦‚æœä½ å…ˆå‰å°† gulp å®‰è£…åˆ°å…¨å±€ç¯å¢ƒä¸­äº†ï¼Œè¯·æ‰§è¡Œ npm rm --global gulp å°† gulp åˆ é™¤å†ç»§ç»­ä»¥ä¸‹æ“ä½œã€‚æ¥ä¸‹æ¥æ£€æŸ¥nodeã€npmã€npxæ˜¯å¦å®‰è£…æ­£ç¡®ï¼š</p>
<pre><code class="language-shell">node -v
npm -v
npx -v
</code></pre>
<h3 id="10æ­å»ºæµ‹è¯•é¡¹ç›®">10)	æ­å»ºæµ‹è¯•é¡¹ç›®</h3>
<pre><code>|----dist æ„å»ºä¹‹åçš„ä»£ç ï¼Œå®é™…éƒ¨ç½²çš„çº¿ä¸Šç¯å¢ƒ
|----src å¼€å‘æ—¶çš„ä»£ç ï¼Œé€‚åˆé˜…è¯»å’Œä¿®æ”¹
|----|----js
|----|----css
|----index.html
</code></pre>
<h3 id="11å®‰è£…gulp">11)	å®‰è£…gulp</h3>
<ul>
<li><code>npm install gulp-cli --global</code></li>
<li><code>npm install gulp --save-dev</code></li>
</ul>
<h3 id="12åˆ›å»ºgulpfileæ–‡ä»¶">12)	åˆ›å»ºgulpfileæ–‡ä»¶</h3>
<p>åˆ›å»º<code>gulpfile.js</code>æ–‡ä»¶æµ‹è¯•gulpæŒ‡ä»¤ï¼š<br>
gulpfile æ˜¯é¡¹ç›®ç›®å½•ä¸‹åä¸º gulpfile.js ï¼Œåœ¨è¿è¡Œ gulp å‘½ä»¤æ—¶ä¼šè¢«è‡ªåŠ¨åŠ è½½ã€‚è¿™ä¸ªæ–‡ä»¶ç”¨æ¥ç¼–å†™gulpç¨‹åºï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨åŒ–çš„å…·ä½“ä»»åŠ¡ã€‚æ–‡ä»¶ä¸­å¯ä»¥åŒ…å«çº¯JavaScript ä»£ç æˆ– Node æ¨¡å—ã€‚</p>
<pre><code class="language-js">//ä»»ä½•å¯¼å‡ºçš„å‡½æ•°éƒ½å°†æ³¨å†Œåˆ° gulp çš„ä»»åŠ¡ï¼ˆtaskï¼‰ç³»ç»Ÿä¸­
exports.default = function (cb) {
cb();  //æ¯ä¸ªä»»åŠ¡æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„javascriptå‡½æ•° éœ€è¦cbæ ‡è®°çŠ¶æ€
}
</code></pre>
<h2 id="5ä½¿ç”¨æ’ä»¶">5ï¼ä½¿ç”¨æ’ä»¶</h2>
<h3 id="13nodeè½¬æ¢æµ">13)	Nodeè½¬æ¢æµ</h3>
<p>Gulpæ˜¯åŸºäºæµçš„æ“ä½œï¼Œæ¯ä¸ªGulpæ’ä»¶éƒ½æ˜¯ä¸€ä¸ªNodeè½¬æ¢æµï¼ˆTransform Streamsï¼‰ã€‚Gulpå°è£…äº†è¯»å–æ–‡ä»¶æµå’Œè¾“å‡ºæµåˆ°æ–‡ä»¶çš„æ–¹æ³•ï¼Œæ’ä»¶ç”¨æ¥åœ¨è¿‡ç¨‹ä¸­è½¬åŒ–æµã€‚è½¬æ¢æµçš„æ’ä»¶éœ€è¦æ”¾ç½®å°è£…çš„<code>pipe()</code>ï¼ˆpipelineç®¡é“ï¼‰æ–¹æ³•ä¸­ã€‚</p>
<p><code>src(æºæ–‡ä»¶).pipe(æ’ä»¶æ“ä½œ).pipe(æ’ä»¶æ“ä½œ).dest(è¾“å‡ºç›®æ ‡)</code></p>
<ul>
<li>src() æ¥å— globå‚æ•°ï¼Œä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–æ–‡ä»¶ç„¶åç”Ÿæˆä¸€ä¸ª Node æµï¼ˆstreamï¼‰ã€‚å®ƒå°†æ‰€æœ‰åŒ¹é…çš„æ–‡ä»¶è¯»å–åˆ°å†…å­˜ä¸­å¹¶é€šè¿‡æµï¼ˆstreamï¼‰è¿›è¡Œå¤„ç†ã€‚ç”±src()äº§ç”Ÿçš„æµï¼ˆstreamï¼‰åº”å½“ä»ä»»åŠ¡ï¼ˆtaskï¼‰ä¸­è¿”å›å¹¶å‘å‡ºå¼‚æ­¥å®Œæˆçš„ä¿¡å·ï¼Œå°±å¦‚åˆ›å»ºä»»åŠ¡ï¼ˆtaskï¼‰ æ–‡æ¡£ä¸­æ‰€è¿°ã€‚</li>
<li>pipe() ç®¡é“æ–¹æ³•ç”¨äºæµè½¬åŒ–çš„è¿æ¥ï¼Œé€šè¿‡ä¼ å…¥æ’ä»¶æ“ä½œæ•°æ®æµï¼Œæ¯ä¸ªæ’ä»¶åº”å½“åªå®Œæˆå¿…è¦çš„å·¥ä½œã€‚å› æ­¤ä½ å¯ä»¥æŠŠå®ƒä»¬åƒæ„å»ºå—ä¸€æ ·è¿æ¥åœ¨ä¸€èµ·ã€‚è·å¾—æƒ³è¦çš„ç»“æœå¯èƒ½éœ€è¦æŠŠä¸€ç»„æ’ä»¶ç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨ã€‚</li>
<li>dest() æ¥å—ä¸€ä¸ªè¾“å‡ºç›®å½•ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”å®ƒè¿˜ä¼šäº§ç”Ÿä¸€ä¸ª Node æµï¼ˆstreamï¼‰ï¼Œé€šå¸¸ä½œä¸ºç»ˆæ­¢æµï¼ˆterminator streamï¼‰ã€‚å½“å®ƒæ¥æ”¶åˆ°é€šè¿‡ç®¡é“ï¼ˆpipelineï¼‰ä¼ è¾“çš„æ–‡ä»¶æ—¶ï¼Œå®ƒä¼šå°†æ–‡ä»¶å†…å®¹åŠæ–‡ä»¶å±æ€§å†™å…¥åˆ°æŒ‡å®šçš„ç›®å½•ä¸­å¹¶ä¸”æ²¿ç”¨ä¹‹å‰çš„æ–‡ä»¶åã€‚å¦‚æœè¦é‡å‘½åï¼Œéœ€è¦åœ¨æ­¤ä¹‹å‰ä½¿ç”¨renameæ’ä»¶ä¿®æ”¹ã€‚</li>
</ul>
<h3 id="14å¸¸ç”¨æ’ä»¶åˆ—è¡¨">14)	å¸¸ç”¨æ’ä»¶åˆ—è¡¨</h3>
<p>æ‰˜ç®¡åœ¨ npm ä¸Šçš„æ’ä»¶æ ‡è®°æœ‰ &quot;gulpplugin&quot; å’Œ &quot;gulpfriendly&quot; å…³é”®è¯ - å¯ä»¥åœ¨<code>æ’ä»¶æœç´¢é¡µé¢</code>ä¸Šæµè§ˆå’Œæœç´¢ã€‚åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œé€šå¸¸éœ€è¦å¯¹htmlï¼Œcsså’Œjsè¿›è¡Œå¤„ç†ã€‚ç‰¹åˆ«æ³¨æ„ï¼Œå½“ä»£ç ç»è¿‡è½¬åŒ–åï¼ŒåŸæœ‰æ–‡ä»¶ä¸­çš„è·¯å¾„å’Œåå­—è¦ä½œåŒæ­¥çš„ä¿®æ”¹ï¼Œå¦åˆ™æ— æ³•æ‰§è¡Œã€‚<br>
Javascriptç›¸å…³æ’ä»¶</p>
<ul>
<li>
<p>gulp-concat	åˆå¹¶å¤šä¸ªjavascriptæ–‡ä»¶ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªæ–°çš„åç§°ã€‚gulpä¸æ”¯æŒes6çš„æ¨¡å—åˆå¹¶ï¼Œä½¿ç”¨exportå’Œimportä¼šå‡ºé”™ã€‚å®ƒå¯ä»¥é€šè¿‡æ’ä»¶åˆå¹¶ä¼˜åŒ–requirejsåŠ è½½çš„æ¨¡å—ã€‚</p>
</li>
<li>
<p>gulp-uglify  å‹ç¼©javascriptä»£ç ï¼Œä¸ä¼šé‡å‘½å</p>
</li>
<li>
<p>gulp-rename  é‡å‘½åæ–‡ä»¶ï¼Œå®ƒæ”¯æŒå¯¹è±¡å½¢å¼çš„é…ç½®å‚æ•°</p>
<pre><code class="language-js">const gulp = require(&quot;gulp&quot;);
	// console.dir(gulp);
	
//ä»æ¨¡å—æå–æ–¹æ³•
const {src, dest} = gulp;

//åŠ è½½gulpæ’ä»¶åŒ…
const concat = require(&quot;gulp-concat&quot;),
  uglify = require(&quot;gulp-uglify&quot;),
  rename = require(&quot;gulp-rename&quot;);

//æ³¨å†Œé»˜è®¤ä»»åŠ¡
exports.default = function (cb) {
  //æ¨¡å—å…·ä½“çš„æ‰§è¡ŒåŠ¨ä½œï¼Œéœ€è¦è¿”å›å¼‚æ­¥å®Œæˆä¿¡å·
  return src(&quot;./src/js/*.js&quot;)
    .pipe(concat(&quot;build.js&quot;))   //ä¸´æ—¶æ–‡ä»¶å
    .pipe(uglify()) //å‹ç¼©æ–‡ä»¶
    .pipe(rename({extname : &quot;.min.js&quot;}))  //é‡æ–°å‘½å
    .pipe(dest(&quot;./dist/js&quot;));  //è¾“å‡ºç›®æ ‡21	
}
</code></pre>
<h4 id="cssç›¸å…³çš„æ’ä»¶">CSSç›¸å…³çš„æ’ä»¶</h4>
<ul>
<li>
<p>gulp-concat-css åˆå¹¶å¤šä¸ªcssæ–‡ä»¶ä¸ºä¸€ä¸ªæ•´ä½“</p>
</li>
<li>
<p>gulp-clean-css å‹ç¼©cssä»£ç ï¼Œå¹¶è®¾ç½®å…¼å®¹ie8</p>
</li>
<li>
<p>gulp-less ç¼–è¯‘lessä»£ç æ–‡ä»¶ï¼Œä¸€èˆ¬åœ¨åˆå¹¶å‹ç¼©å‰ç¼–è¯‘lessæ–‡ä»¶ï¼Œç„¶åç»Ÿä¸€çš„è¿›è¡Œæ“ä½œã€‚</p>
<pre><code class="language-js">const {src, dest, series, parallel} = require(&quot;gulp&quot;);
const concatCss = require(&quot;gulp-concat-css&quot;),
    cleanCss = require(&quot;gulp-clean-css&quot;),
    rename = require(&quot;gulp-rename&quot;),
    lessCss = require(&quot;gulp-less&quot;);
    
//æ³¨å†Œå¤šä¸ªå•ä¸€ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨module.exports
function css() {
        return src(&quot;./src/css/*.css&quot;)
            .pipe(concatCss(&quot;./css/build.css&quot;))
            .pipe(rename({extname : &quot;.min.css&quot;}))
            .pipe(cleanCss({compatibility:&quot;ie8&quot;}))
            .pipe(dest(&quot;./dist/&quot;));

}

function less() { 
      return src(&quot;src/less/*.less&quot;)
          .pipe(lessCSS())
          .pipe(dest(&quot;./src/css&quot;)); //è‡ªåŠ¨åŠ è½½åç§°
}
//ä»¥åŒæ­¥çš„æ–¹å¼ é¡ºåºæ‰§è¡Œåˆ—è¡¨ä»»åŠ¡
exports.default = series(less, css);
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 id="htmlç›¸å…³æ’ä»¶">HTMLç›¸å…³æ’ä»¶</h4>
<ul>
<li>
<p>gulp-htmlmin å‹ç¼©htmlä»£ç ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©ä½ ä¼˜åŒ–htmlæ ‡ç­¾ï¼Œå¹¶å»é™¤ä¸å¿…è¦çš„ç©ºç™½å’Œæ³¨é‡Šã€‚</p>
<pre><code class="language-js">function html() {
  return src(&quot;./src/html/*.html&quot;)
      .pipe(dest(&quot;./dist/html/&quot;))
      .pipe(src(&quot;src/**/*.html&quot;))
      .pipe(htmlmin({
          removeComments: true, //æ¸…é™¤HTMLæ³¨é‡Š
          collapseWhitespace: true, //å‹ç¼©HTML
          collapseBooleanAttributes: true, //çœç•¥å¸ƒå°”å±æ€§çš„å€¼
          removeEmptyAttributes: true, //åˆ é™¤æ‰€æœ‰ç©ºæ ¼ä½œå±æ€§å€¼
          removeScriptTypeAttributes: true, //åˆ é™¤&lt;script&gt;çš„type
          removeStyleLinkTypeAttributes: true, //åˆ é™¤&lt;style&gt;çš„type
          minifyJS: true, //å‹ç¼©é¡µé¢JS
          minifyCSS: true //å‹ç¼©é¡µé¢CSS
      }))
      .pipe(dest(&quot;./dist/&quot;));17	
}
</code></pre>
</li>
</ul>
<h4 id="å›¾ç‰‡ç›¸å…³æ’ä»¶">å›¾ç‰‡ç›¸å…³æ’ä»¶</h4>
<ul>
<li>
<p>gulp-imagemin å‹ç¼©å›¾ç‰‡æ ¼å¼ <code>Minify PNG, JPEG, GIF and SVG images</code>å‡å°‘å›¾ç‰‡ä½“ç§¯ï¼Œæé«˜ç½‘ç»œä¼ è¾“é€Ÿç‡ã€‚</p>
<pre><code class="language-js">//å›¾ç‰‡å‹ç¼©ä»»åŠ¡
function img() {
    return src(&quot;src/images/*&quot;)
        .pipe(imagemin({
        //ä¼˜åŒ–ç­‰çº§é»˜è®¤ä¸ºï¼š3  å–å€¼èŒƒå›´ï¼š0-7 
        optimizationLevel: 5,
        //é»˜è®¤ä¸ºfalse æ— æŸå‹ç¼©jpgå›¾ç‰‡
        progressive: true,
        //é»˜è®¤ä¸ºfalse éš”è¡Œæ‰«ægifè¿›è¡Œæ¸²æŸ“
        interlaced: true,
        //é»˜è®¤ä¸ºfalse å¤šæ¬¡ä¼˜åŒ–svgç›´åˆ°å®Œå…¨ä¼˜åŒ–
        // multipass: true
    }))
        .pipe(imagemin({
        progressive: true, //æ— æŸå‹ç¼©JPGå›¾ç‰‡  
        svgoPlugins: [{
            removeViewBox: false
        }], //ä¸ç§»é™¤svgçš„viewboxå±æ€§
        use: [pngquant()] //ä½¿ç”¨pngquantæ’ä»¶è¿›è¡Œæ·±åº¦å‹ç¼©  
    }))
      .pipe(dest(&quot;./dist/images/&quot;));39		
}
</code></pre>
</li>
</ul>
<h4 id="requirejsæ¨¡å—ä¼˜åŒ–">requirejsæ¨¡å—ä¼˜åŒ–</h4>
<ul>
<li>
<p>gulp-gulp-requirejs-optimize ä¼˜åŒ–åˆå¹¶requirejsçš„æ¨¡å—æ–‡ä»¶ï¼Œå°†ä¾èµ–æ¨¡å—æ³¨å…¥ä¸»æ¨¡å—ä¸­ï¼Œä»¥æ­¤å‡å°‘å½“å‰é¡µé¢çš„httpè¯·æ±‚æ¬¡æ•°ï¼Œæé«˜åŠ è½½æ•ˆç‡ã€‚optimizeæ’ä»¶åªæ”¯æŒes5ï¼Œéœ€è¦å…ˆå°†æ¨¡å—ä¸­åŒ…å«çš„es6è¯­æ³•è¿›è¡Œè½¬åŒ–ã€‚åœ¨ç®¡é“æ–¹æ³•ä¸­è°ƒç”¨è¯¥æ’ä»¶æ—¶éœ€è¦é…ç½®æ¨¡å—åå’Œè·¯å¾„çš„å…³è”æ˜ å°„ï¼Œæ›¿ä»£åŸå…ˆåœ¨ä¸»æ¨¡å—ä¸­ä½¿ç”¨require.config()é…ç½®çš„ä¿¡æ¯ï¼š</p>
<pre><code class="language-js">function js() {
    return src(&quot;./src/js/*.js&quot;)
        .pipe(requirejsOptimize({
        optimize: &quot;none&quot;,

        paths: {
            //ä¾èµ–æ¨¡å—çš„è·¯å¾„åˆ—è¡¨
            &quot;jquery&quot;: &quot;../../node_modules/jquery/dist/jquery.min&quot;,
            &quot;header&quot;: &quot;./header&quot;,
            &quot;slide&quot;: &quot;../../node_modules/lautin-slide/slide&quot;,
            &quot;tab&quot;: &quot;../../node_modules/lautin-tab/tab&quot;,
            &quot;template&quot;: &quot;../../node_modules/art-template/lib/template-web&quot;,
            &quot;utils&quot;: &quot;./utils&quot;,
            &quot;jqzoom&quot;: &quot;./jqzoom-core&quot;,
            &quot;pagination&quot;: &quot;../../node_modules/lautin-pagination/libs/Pagination&quot;
        },
        //éè§„èŒƒæ¨¡å—è®¾ç½®
        shim: {
            'slide': {
                deps: [], //ä¾èµ–æ¨¡å—
                exports: 'Slide' //å¯¼å‡ºæ¥å£
            },
            'tab': {
                deps: [],
                exports: 'Tab'
            },
            'pagination': {
                deps: [], //ä¾èµ–æ¨¡å—
                exports: 'Pagination' //å¯¼å‡ºæ¥å£
            },
        },
        //ä¸æ‰“åŒ…çš„é™æ€æ–‡ä»¶
        excludeShallow: [
            'jquery', 'bootstrap', 'clockpicker', 'datetimepickerLang', 'clipboard', 'moment', 'datetimepicker', 'daterangepicker'
        ],
        preserveLicenseComments: false, //å»æ‰å¤´éƒ¨ç‰ˆæƒå£°æ˜
        removeCombined: false, //è‡ªåŠ¨åˆ é™¤è¢«åˆå¹¶è¿‡çš„æ–‡ä»¶
    }))
        .pipe(uglify()) //å‹ç¼©
        .pipe(rename({ //é‡å‘½å
        extname: &quot;.min.js&quot;
}))
        .pipe(dest(&quot;./dist/js/&quot;)); //è¾“å‡º	}
</code></pre>
</li>
<li>
<p>gulp-babel  javascriptä»£ç ç”Ÿæˆå™¨ï¼Œå¯ä»¥è½¬åŒ–ä»£ç ä»¥åŠPolyfill ä½¿ç”¨æ—¶éœ€ä¿è¯åŠ è½½es6è§„èŒƒã€‚æ¥ä¸‹æ¥åœ¨ç®¡é“æ–¹æ³•ä¸­è°ƒç”¨æ’ä»¶æ—¶æ·»åŠ é…ç½®presetsã€‚</p>
</li>
</ul>
<pre><code class="language-shell">cnpm install --save-dev gulp-babel@7 babel-core babel-preset-env
cnpm install babel-preset-es2015
</code></pre>
<pre><code class="language-javascript">babel({presets: ['es2015']})
</code></pre>
<ul>
<li>gulp-load-plugins è‡ªåŠ¨åŠ è½½æ’ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨å¼•å…¥ ä½†å‰æéœ€è¦å…ˆä¸‹è½½</li>
</ul>
<h2 id="6éæ’ä»¶åº”ç”¨">6ï¼éæ’ä»¶åº”ç”¨</h2>
<p>å¹¶é gulp ä¸­çš„ä¸€åˆ‡éƒ½éœ€è¦ç”¨æ’ä»¶æ¥å®Œæˆã€‚è™½ç„¶å®ƒä»¬æ˜¯ä¸€ç§å¿«é€Ÿä¸Šæ‰‹çš„æ–¹æ³•ï¼Œä½†è®¸å¤šæ“ä½œéƒ½åº”å½“é€šè¿‡ä½¿ç”¨ç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—æˆ–åº“æ¥å®ç°ã€‚<br>
æ’ä»¶åº”å½“æ€»æ˜¯ç”¨æ¥è½¬æ¢æ–‡ä»¶çš„ã€‚å…¶ä»–æ“ä½œéƒ½åº”è¯¥ä½¿ç”¨ï¼ˆéæ’ä»¶çš„ï¼‰ Node æ¨¡å—æˆ–åº“æ¥å®ç°ã€‚</p>
<pre><code class="language-js">//å¹¶éåŸºäºæ’ä»¶ï¼Œæ‰€æœ‰çš„nodeæ¨¡å—éƒ½æ”¯æŒ
const fs = require(&quot;fs&quot;);
exports.default = function (cb) {
    //æ‰€æœ‰å¯æ‰§è¡Œçš„nodeä»£ç éƒ½å¯ä»¥
    fs.unlinkSync(&quot;./dist/js/build.min.js&quot;); //åˆ é™¤å·²æœ‰çš„åˆå¹¶æ–‡ä»¶
    cb();7	
}
</code></pre>
<p>å¤åˆ¶æ–‡ä»¶æ“ä½œï¼š</p>
<pre><code class="language-js">const fs = require(&quot;fs&quot;);
	
exports.default = function (cb) {
    let source = &quot;./src/html/&quot;,
        target = &quot;./dist/html/&quot;;
    //æ£€æµ‹å¦‚æœç›®å½•ä¸å­˜åœ¨ åˆ™åˆ›å»ºä¹‹
    if (!fs.existsSync(target)) fs.mkdirSync(target, {
        recursive: true, //é€’å½’åˆ›å»º
    });

    const files = fs.readdirSync(source);
    files.forEach((item) =&gt; {
        let filename = path.join(source, item);
        let buffer = fs.readFileSync(filename);
        fs.writeFileSync(path.join(target, item), buffer);
    });
  
    //å¯ä»¥ç›´æ¥ä½¿ç”¨srcå’Œdestæ–¹æ³•ç›´æ¥è½¬åŒ–
    //return src(source)
    // .pipe(dest(target));
}
</code></pre>
<h3 id="15gulpifæ¡ä»¶æ’ä»¶">15)	gulpifæ¡ä»¶æ’ä»¶</h3>
<p>å› ä¸ºæ’ä»¶çš„æ“ä½œä¸åº”è¯¥é’ˆå¯¹ç‰¹å®šæ–‡ä»¶ç±»å‹ï¼Œå› æ­¤ä½ å¯èƒ½éœ€è¦ä½¿ç”¨åƒ<code>gulp-if</code>ä¹‹ç±»çš„æ’ä»¶æ¥å®Œæˆè½¬æ¢æŸäº›æ–‡ä»¶çš„æ“ä½œã€‚</p>
<pre><code class="language-js">function chk(file) {
//fileä¸ºsrcä¸­éå†å‡ºçš„æ¯ä¸ªæ–‡ä»¶å¯¹è±¡
//file.historyæ•°ç»„ä¸­å­˜æ”¾äº†è¯¥æ–‡ä»¶æˆ–ç›®å½•å
//åªé’ˆå¯¹index.jsæ–‡ä»¶çš„æ“ä½œ
return  file.history[0].endsWith(â€œindex.jsâ€);
}

src(â€œsrc/js/*.jsâ€)
.pipe(gulpif(chk, concat()))
.dest()
</code></pre>
<h3 id="16through2å†…è”æ’ä»¶">16)	through2å†…è”æ’ä»¶</h3>
<h2 id="7åˆ›å»ºä»»åŠ¡">7ï¼åˆ›å»ºä»»åŠ¡</h2>
<p>æ¯ä¸ª gulp ä»»åŠ¡ï¼ˆtaskï¼‰éƒ½æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„ JavaScript å‡½æ•°ï¼Œæ­¤å‡½æ•°æ˜¯ä¸€ä¸ªå¯ä»¥æ¥æ”¶ callback ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªè¿”å› streamã€promiseã€event emitterã€child process æˆ– observable (åé¢ä¼šè¯¦ç»†è®²è§£) ç±»å‹å€¼çš„å‡½æ•°ã€‚ç”±äºæŸäº›å¹³å°çš„é™åˆ¶è€Œä¸æ”¯æŒå¼‚æ­¥ä»»åŠ¡ï¼Œå› æ­¤ gulp è¿˜æä¾›äº†ä¸€ä¸ªæ¼‚äº® æ›¿ä»£å“ã€‚<br>
ä»»åŠ¡ï¼ˆtasksï¼‰å¯ä»¥æ˜¯ publicï¼ˆå…¬å¼€ï¼‰ æˆ– privateï¼ˆç§æœ‰ï¼‰ ç±»å‹çš„ã€‚</p>
<ul>
<li>å…¬å¼€ä»»åŠ¡ï¼ˆPublic tasksï¼‰ï¼šå®ƒæŒ‡ä» gulpfile ä¸­è¢«å¯¼å‡ºï¼ˆexportï¼‰ï¼Œå¯ä»¥é€šè¿‡ gulp å‘½ä»¤ç›´æ¥è°ƒç”¨çš„ä»»åŠ¡ã€‚</li>
</ul>
<ul>
<li>ç§æœ‰ä»»åŠ¡ï¼ˆPrivate tasksï¼‰ï¼šå®ƒè®¾è®¡è¢«ç”¨äºå†…éƒ¨ä½¿ç”¨ï¼Œé€šå¸¸ä½œä¸º series() æˆ– parallel() ç»„åˆçš„ç»„æˆéƒ¨åˆ†ã€‚ä¸€ä¸ªç§æœ‰ï¼ˆprivateï¼‰ç±»å‹çš„ä»»åŠ¡ï¼ˆtaskï¼‰åœ¨å¤–è§‚å’Œè¡Œä¸ºä¸Šå’Œå…¶ä»–ä»»åŠ¡ï¼ˆtaskï¼‰æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸èƒ½å¤Ÿè¢«ç”¨æˆ·ç›´æ¥è°ƒç”¨ã€‚å¦‚éœ€å°†ä¸€ä¸ªä»»åŠ¡ï¼ˆtaskï¼‰æ³¨å†Œä¸ºå…¬å¼€ï¼ˆpublicï¼‰ç±»å‹çš„ï¼Œåªéœ€ä» gulpfile ä¸­å¯¼å‡ºï¼ˆexportï¼‰å³å¯ã€‚</li>
</ul>
<h3 id="17å¯¼å‡ºä»»åŠ¡">17)	å¯¼å‡ºä»»åŠ¡</h3>
<p>ä½¿ç”¨exportså¯¼å‡ºä»»åŠ¡åˆ—è¡¨ï¼Œæ¯ä¸ªä»»åŠ¡å³å¯ä»¥æ˜¯ä¸€ä¸ªå­—é¢é‡å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å·²æœ‰å‡½æ•°çš„å¼•ç”¨ã€‚å¯ä»¥é€šè¿‡é‡å†™module.exportså°†ä»»åŠ¡é›†åˆåœ¨ä¸€èµ·ã€‚ä»»åŠ¡å‡½æ•°æœ€å¥½å•ç‹¬å£°æ˜ï¼Œè¿™æ ·ä¾¿äºç»„åˆå¼ä»»åŠ¡ä¸­å¼•ç”¨å®ƒä»¬ã€‚</p>
<pre><code class="language-js">const {series, parallel} = require(â€œgulpâ€);

function html()  {}
function css() {}
function js() {}

exports.html = html;
exports.css = css;
exports.js = js;
exports.default = parallel(html, css, js);

//ä½¿ç”¨module.exportsé‡å†™
module.exports = {
    html,
    css,
    js43	}
</code></pre>
<h3 id="18ç»„åˆä»»åŠ¡">18)	ç»„åˆä»»åŠ¡</h3>
<p>é™¤äº†æŒ‡å®šçš„ä»»åŠ¡å¤–ï¼Œgulpå‘½ä»¤åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨åŠ è½½defaultä»»åŠ¡ï¼Œé€šå¸¸å®ƒæ˜¯ä¸€ä¸ªç»„åˆä»»åŠ¡ã€‚åœ¨ç»„åˆä»»åŠ¡ä¸­ï¼Œæ‰€æœ‰çš„ä»»åŠ¡å‡½æ•°å¿…é¡»ç‹¬ç«‹å®šåˆ¶ä»¥ä¾¿æ¥ä¸‹æ¥åœ¨series()å’Œparallel()æ–¹æ³•ä¸­å¼•ç”¨å®ƒä»¬ã€‚</p>
<pre><code class="language-js">const {src, dest, series, parallel} = require(&quot;gulp&quot;);	
const concatCSS = require(&quot;gulp-concat-css&quot;),
      rename = require(&quot;gulp-rename&quot;),
      lessCSS = require(&quot;gulp-less&quot;),
      cleanCSS = require(&quot;gulp-clean-css&quot;);

//æ³¨å†Œå¤šä¸ªå•ä¸€ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨module.exports
module.exports = {
    concat (cb) {
        console.log(222);
        return src(&quot;./src/css/*.css&quot;)
            .pipe(concatCSS(&quot;./css/build.css&quot;))
            .pipe(rename({extname : &quot;.min.css&quot;}))
            .pipe(cleanCSS({compatibility:&quot;ie8&quot;}))
            .pipe(dest(&quot;./dist/&quot;));
    },

    less (cb) {
        console.log(111);
        return src(&quot;src/less/*.less&quot;)
            .pipe(lessCSS())
            .pipe(dest(&quot;./src/css&quot;)); //è‡ªåŠ¨åŠ è½½åç§°
    },
    default : series(less, concat), //é¡ºåºæ‰§è¡Œä»»åŠ¡ï¼Œä¿è¯åˆå¹¶æ–‡ä»¶ä¸­åŒ…å«lessç¼–è¯‘æ–‡ä»¶
    default : parallel(less, concat),//å¼‚æ­¥æ‰§è¡Œä»»åŠ¡ï¼Œæ‰§è¡Œåˆå¹¶ä»»åŠ¡æ—¶lessæœªå¿…å®Œæˆç¼–è¯‘ï¼Œåˆå¹¶æ–‡ä»¶ä¸­å¯èƒ½ä¼šä¸¢å¤±lessæ–‡ä»¶
}
</code></pre>
<h2 id="8å¼‚æ­¥æ‰§è¡Œ">8ï¼å¼‚æ­¥æ‰§è¡Œ</h2>
<p>Node åº“ä»¥å¤šç§æ–¹å¼å¤„ç†å¼‚æ­¥åŠŸèƒ½ã€‚æœ€å¸¸è§çš„æ¨¡å¼æ˜¯ error-first callbacksï¼Œä½†æ˜¯ä½ è¿˜å¯èƒ½ä¼šé‡åˆ° streamsã€promisesã€event emittersã€child processes, æˆ– observablesã€‚gulp ä»»åŠ¡ï¼ˆtaskï¼‰è§„èŒƒåŒ–äº†æ‰€æœ‰è¿™äº›ç±»å‹çš„å¼‚æ­¥åŠŸèƒ½ã€‚</p>
<h3 id="19ä»»åŠ¡å®Œæˆé€šçŸ¥">19)	ä»»åŠ¡å®Œæˆé€šçŸ¥</h3>
<p>å½“ä»ä»»åŠ¡ï¼ˆtaskï¼‰ä¸­è¿”å› streamã€promiseã€event emitterã€child process æˆ– observable æ—¶ï¼ŒæˆåŠŸæˆ–é”™è¯¯å€¼å°†é€šçŸ¥ gulp æ˜¯å¦ç»§ç»­æ‰§è¡Œæˆ–ç»“æŸã€‚å¦‚æœä»»åŠ¡ï¼ˆtaskï¼‰å‡ºé”™ï¼Œgulp å°†ç«‹å³ç»“æŸæ‰§è¡Œå¹¶æ˜¾ç¤ºè¯¥é”™è¯¯ã€‚<br>
å½“ä½¿ç”¨ series() ç»„åˆå¤šä¸ªä»»åŠ¡ï¼ˆtaskï¼‰æ—¶ï¼Œä»»ä½•ä¸€ä¸ªä»»åŠ¡ï¼ˆtaskï¼‰çš„é”™è¯¯å°†å¯¼è‡´æ•´ä¸ªä»»åŠ¡ç»„åˆç»“æŸï¼Œå¹¶ä¸”ä¸ä¼šè¿›ä¸€æ­¥æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚å½“ä½¿ç”¨ parallel() ç»„åˆå¤šä¸ªä»»åŠ¡ï¼ˆtaskï¼‰æ—¶ï¼Œä¸€ä¸ªä»»åŠ¡çš„é”™è¯¯å°†ç»“æŸæ•´ä¸ªä»»åŠ¡ç»„åˆçš„ç»“æŸï¼Œä½†æ˜¯å…¶ä»–å¹¶è¡Œçš„ä»»åŠ¡ï¼ˆtaskï¼‰å¯èƒ½ä¼šæ‰§è¡Œå®Œï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰æ‰§è¡Œå®Œã€‚</p>
<h3 id="20è¿”å›å€¼ç±»å‹">20)	è¿”å›å€¼ç±»å‹</h3>
<ul>
<li>
<p>è¿”å›streamï¼Œæ‰€æœ‰ç®¡é“è¿è¡Œçš„ä»»åŠ¡ï¼Œæœ€ç»ˆä»¥è¾“å…¥è¾“å‡ºæµçš„å½¢å¼ è¿”å›å¼‚æ­¥çº¿ç¨‹</p>
</li>
<li>
<p>è¿”å›Promiseï¼Œä¸€ä¸ªPromiseå¯¹è±¡çš„å®ä¾‹</p>
</li>
<li>
<p>è¿”å›child processæˆ–è€…observable</p>
</li>
<li>
<p>ä½¿ç”¨callbackï¼Œå¦‚æœä»»åŠ¡ï¼ˆtaskï¼‰ä¸è¿”å›ä»»ä½•å†…å®¹ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ callback æ¥æŒ‡ç¤ºä»»åŠ¡å·²å®Œæˆã€‚åœ¨å¦‚ä¸‹ç¤ºä¾‹ä¸­ï¼Œcallback å°†ä½œä¸ºå”¯ä¸€ä¸€ä¸ªåä¸º cb() çš„å‚æ•°ä¼ é€’ç»™ä½ çš„ä»»åŠ¡ï¼ˆtaskï¼‰ã€‚</p>
<pre><code class="language-js">function callbackError(cb) {
    // `cb()` should be called by some async work
    cb(new Error('kaboom'));
}
exports.default = callbackError;
</code></pre>
</li>
</ul>
<p>å¦‚éœ€é€šè¿‡ callback æŠŠä»»åŠ¡ï¼ˆtaskï¼‰ä¸­çš„é”™è¯¯å‘ŠçŸ¥ gulpï¼Œè¯·å°† Error ä½œä¸º callback çš„å”¯ä¸€å‚æ•°ã€‚<br>
å¦‚æœä¸ä½¿ç”¨å‰é¢æä¾›åˆ°å‡ ç§æ–¹å¼ï¼Œä½ è¿˜å¯ä»¥å°†ä»»åŠ¡ï¼ˆtaskï¼‰å®šä¹‰ä¸ºä¸€ä¸ª async å‡½æ•°ï¼Œå®ƒå°†åˆ©ç”¨ promise å¯¹ä½ çš„ä»»åŠ¡ï¼ˆtaskï¼‰è¿›è¡ŒåŒ…è£…ã€‚è¿™å°†å…è®¸ä½ ä½¿ç”¨ await å¤„ç† promiseï¼Œå¹¶ä½¿ç”¨å…¶ä»–åŒæ­¥ä»£ç ã€‚</p>
<pre><code class="language-js">const fs = require('fs');

async function asyncAwaitTask() {
    const { version } = fs.readFileSync('package.json');
    console.log(version);
    await Promise.resolve('some result');
}

exports.default = asyncAwaitTask;
</code></pre>
<h2 id="9globalè¯¦è§£">9ï¼globalè¯¦è§£</h2>
<h3 id="21å­—ç¬¦ä¸²ç‰‡æ®µä¸åˆ†éš”ç¬¦">21)	å­—ç¬¦ä¸²ç‰‡æ®µä¸åˆ†éš”ç¬¦</h3>
<p>å­—ç¬¦ä¸²ç‰‡æ®µï¼ˆsegmentï¼‰æ˜¯æŒ‡ä¸¤ä¸ªåˆ†éš”ç¬¦ä¹‹é—´çš„æ‰€æœ‰å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚åœ¨ glob ä¸­ï¼Œåˆ†éš”ç¬¦æ°¸è¿œæ˜¯ / å­—ç¬¦ - ä¸åŒºåˆ†æ“ä½œç³»ç»Ÿ - å³ä¾¿æ˜¯åœ¨é‡‡ç”¨ \ ä½œä¸ºåˆ†éš”ç¬¦çš„ Windows æ“ä½œç³»ç»Ÿä¸­ã€‚åœ¨ glob ä¸­ï¼Œ\ å­—ç¬¦è¢«ä¿ç•™ä½œä¸ºè½¬ä¹‰ç¬¦ä½¿ç”¨ã€‚<br>
å¦‚ä¸‹ï¼Œ * è¢«è½¬ä¹‰äº†ï¼Œå› æ­¤ï¼Œ* å°†è¢«ä½œä¸ºä¸€ä¸ªæ™®é€šå­—ç¬¦ä½¿ç”¨ï¼Œè€Œä¸å†æ˜¯é€šé…ç¬¦äº†ã€‚</p>
<h3 id="22ç‰¹æ®Šå­—ç¬¦-ä¸€ä¸ªæ˜Ÿå·">22)	ç‰¹æ®Šå­—ç¬¦ï¼š * (ä¸€ä¸ªæ˜Ÿå·)</h3>
<p>åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ç‰‡æ®µä¸­åŒ¹é…ä»»æ„æ•°é‡çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬é›¶ä¸ªåŒ¹é…ã€‚å¯¹äºåŒ¹é…å•çº§ç›®å½•ä¸‹çš„æ–‡ä»¶å¾ˆæœ‰ç”¨ã€‚<br>
ä¸‹é¢è¿™ä¸ª glob èƒ½å¤ŸåŒ¹é…ç±»ä¼¼ index.js çš„æ–‡ä»¶ï¼Œä½†æ˜¯ä¸èƒ½åŒ¹é…ç±»ä¼¼ scripts/index.js æˆ– scripts/nested/index.js çš„æ–‡ä»¶ã€‚</p>
<h3 id="23ç‰¹æ®Šå­—ç¬¦-ä¸¤ä¸ªæ˜Ÿå·">23)	ç‰¹æ®Šå­—ç¬¦ï¼š ** (ä¸¤ä¸ªæ˜Ÿå·)</h3>
<p>åœ¨å¤šä¸ªå­—ç¬¦ä¸²ç‰‡æ®µä¸­åŒ¹é…ä»»æ„æ•°é‡çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬é›¶ä¸ªåŒ¹é…ã€‚ å¯¹äºåŒ¹é…åµŒå¥—ç›®å½•ä¸‹çš„æ–‡ä»¶å¾ˆæœ‰ç”¨ã€‚è¯·ç¡®ä¿é€‚å½“åœ°é™åˆ¶å¸¦æœ‰ä¸¤ä¸ªæ˜Ÿå·çš„ glob çš„ä½¿ç”¨ï¼Œä»¥é¿å…åŒ¹é…å¤§é‡ä¸å¿…è¦çš„ç›®å½•ã€‚<br>
ä¸‹é¢è¿™ä¸ª glob è¢«é€‚å½“åœ°é™åˆ¶åœ¨ scripts/ ç›®å½•ä¸‹ã€‚å®ƒå°†åŒ¹é…ç±»ä¼¼ scripts/index.jsã€scripts/nested/index.js å’Œ scripts/nested/twice/index.js çš„æ–‡ä»¶ã€‚</p>
<h3 id="24ç‰¹æ®Šå­—ç¬¦-å–å">24)	ç‰¹æ®Šå­—ç¬¦ï¼š ! (å–å)</h3>
<p>ç”±äº glob åŒ¹é…æ—¶æ˜¯æŒ‰ç…§æ¯ä¸ª glob åœ¨æ•°ç»„ä¸­çš„ä½ç½®ä¾æ¬¡è¿›è¡ŒåŒ¹é…æ“ä½œçš„ï¼Œæ‰€ä»¥ glob æ•°ç»„ä¸­çš„å–åï¼ˆnegativeï¼‰glob å¿…é¡»è·Ÿåœ¨ä¸€ä¸ªéå–åï¼ˆnon-negativeï¼‰çš„ glob åé¢ã€‚ç¬¬ä¸€ä¸ª glob åŒ¹é…åˆ°ä¸€ç»„åŒ¹é…é¡¹ï¼Œç„¶ååé¢çš„å–å glob åˆ é™¤è¿™äº›åŒ¹é…é¡¹ä¸­çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœå–å glob åªæ˜¯ç”±æ™®é€šå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œåˆ™æ‰§è¡Œæ•ˆç‡æ˜¯æœ€é«˜çš„ã€‚</p>
<h2 id="10ç›‘å¬çŠ¶æ€">10ï¼ç›‘å¬çŠ¶æ€</h2>
<p>gulp api ä¸­çš„ watch() æ–¹æ³•åˆ©ç”¨æ–‡ä»¶ç³»ç»Ÿçš„ç›‘æ§ç¨‹åºï¼ˆfile system watcherï¼‰å°† globs ä¸ ä»»åŠ¡ï¼ˆtaskï¼‰ è¿›è¡Œå…³è”ã€‚å®ƒå¯¹åŒ¹é… glob çš„æ–‡ä»¶è¿›è¡Œç›‘æ§ï¼Œå¦‚æœæœ‰æ–‡ä»¶è¢«ä¿®æ”¹äº†å°±æ‰§è¡Œå…³è”çš„ä»»åŠ¡ï¼ˆtaskï¼‰ã€‚å¦‚æœè¢«æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆtaskï¼‰æ²¡æœ‰è§¦å‘ å¼‚æ­¥å®Œæˆ ä¿¡å·ï¼Œå®ƒå°†æ°¸è¿œä¸ä¼šå†æ¬¡è¿è¡Œäº†ã€‚<br>
æ­¤ API çš„é»˜è®¤è®¾ç½®æ˜¯åŸºäºé€šå¸¸çš„ä½¿ç”¨åœºæ™¯çš„ï¼Œè€Œä¸”æä¾›äº†å†…ç½®çš„å»¶è¿Ÿå’Œæ’é˜Ÿæœºåˆ¶ã€‚</p>
<pre><code class="language-js">const {
    src,
    dest,
    series,
    parallel,
    watch,
} = require(&quot;gulp&quot;);

function less() {}
function css() {}
function transform() {}
function js() {}
function html() {}
function img() {}

//ç›‘å¬æºæ–‡ä»¶ ä¸€æ—¦å‘ç”Ÿæ”¹å˜æ‰§è¡Œå…¨éƒ¨ä»»åŠ¡ è¿™æ ·è€—æ—¶é•¿ æ²¡å¿…è¦ 
//watch(â€œsrc/*â€, parelle(series(less, css), series(transform, js)))

//åˆ†åˆ«ç›‘å¬æºæ–‡ä»¶çš„çŠ¶æ€ï¼Œå®ç°çƒ­æ›¿æ¢ï¼Œåœ¨è¿è¡Œæ—¶æ›´æ–°å„ç§æ¨¡å—è€Œæ— éœ€è¿›è¡Œå®Œå…¨åˆ·æ–°
watch(&quot;src/css/*&quot;, series(less, css))
watch(&quot;src/js/*&quot;, series(transform, js))
watch(&quot;src/image/*&quot;, img)
watch(&quot;src/*.html&quot; html)
</code></pre>
<hr>
<p align="right">posted @ Zycin (éè½¬è½½ æ¥è‡ªä¸ªäººå­¦ä¹ èµ„æ–™æ•´ç†)</p>
        </div>

        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://fastt.cn/tag/gulp">
            <span class="flex-auto">gulp</span>
          </a>
        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://fastt.cn/tag/grunt">
            <span class="flex-auto">grunt</span>
          </a>
        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://fastt.cn/tag/build tool">
            <span class="flex-auto">build tool</span>
          </a>
        


        <div class="flex justify-between py-8">
          
            <div class="prev-post">
              <a href="https://fastt.cn/post/React1">
                <h3 class="post-title">
                  <i class="remixicon-arrow-left-line"></i>
                  Reactç¬¬ä¸€æ®µ
                </h3>
              </a>
            </div>
          

          
            <div class="next-post">
              <a href="https://fastt.cn/post/regex">
                <h3 class="post-title">
                  æ­£åˆ™è¡¨è¾¾å¼
                  <i class="remixicon-arrow-right-line"></i>
                </h3>
              </a>
            </div>
          
        </div>

        
          
            <link rel="stylesheet" href="https://unpkg.zhimg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.zhimg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: 'f9c4cb98113788bb94e1',
    clientSecret: 'd271ed343d3af9b71c24dff543d9c3e1e4d70a4b',
    repo: 'zycin.github.io',
    owner: 'zycin',
    admin: ['zycin'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

      </div>
    </div>

    <script src="https://fastt.cn/media/prism.js"></script>  
<script>

Prism.highlightAll()

let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

// This should probably be throttled.
// Especially because it triggers during smooth scrolling.
// https://lodash.com/docs/4.17.10#throttle
// You could do like...
// window.addEventListener("scroll", () => {
//    _.throttle(doThatStuff, 100);
// });
// Only not doing it here to keep this Pen dependency-free.

window.addEventListener("scroll", event => {
  let fromTop = window.scrollY;

  mainNavLinks.forEach((link, index) => {
    let section = document.getElementById(decodeURI(link.hash).substring(1));
    let nextSection = null
    if (mainNavLinks[index + 1]) {
      nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
    }
    if (section.offsetTop <= fromTop) {
      if (nextSection) {
        if (nextSection.offsetTop > fromTop) {
          link.classList.add("current");
        } else {
          link.classList.remove("current");    
        }
      } else {
        link.classList.add("current");
      }
    } else {
      link.classList.remove("current");
    }
  });
});


document.addEventListener("DOMContentLoaded", function() {
  var lazyImages = [].slice.call(document.querySelectorAll(".post-feature-image.lazy"));

  if ("IntersectionObserver" in window) {
    let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          let lazyImage = entry.target
          lazyImage.style.backgroundImage = `url(${lazyImage.dataset.bg})`
          lazyImage.classList.remove("lazy")
          lazyImageObserver.unobserve(lazyImage)
        }
      });
    });

    lazyImages.forEach(function(lazyImage) {
      lazyImageObserver.observe(lazyImage)
    })
  } else {
    // Possibly fall back to a more compatible method here
  }
});

const menuContainer = document.querySelector('.menu-container')
const menus = document.querySelectorAll('.menu-container .menu')
const mask = document.querySelector('.mask')
const contentWrapper = document.querySelector('.content-wrapper')
const latestArticle = document.querySelector('.latest-article')
const readMore = document.querySelector('.read-more')
const indexPage = document.querySelector('.index-page')

const isHome = location.pathname === '/'
if (latestArticle) {
  latestArticle.style.display = isHome ? 'block' : 'none'
  readMore.style.display = isHome ? 'block' : 'none'
  indexPage.style.display = isHome ? 'none' : 'block'
}

const openMenu = () => {
  menuContainer.classList.add('open')
  menus.forEach(menu => {
    menu.classList.add('animated', 'fadeInLeft')
  })
  mask.classList.add('open')
  contentWrapper.classList.add('is-second')
}

const closeMenu = () => {
  menuContainer.classList.remove('open')
  menus.forEach(menu => {
    menu.classList.remove('animated', 'fadeInLeft')
  })
  mask.classList.remove('open')
  contentWrapper.classList.remove('is-second')
}
</script>
  
  </body>
</html>
