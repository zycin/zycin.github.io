<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Zycin | GeekBlog</title>
<meta name="description" content="ä¸å¿˜åˆå¿ƒ  æ–¹å¾—å§‹ç»ˆ" />
<link rel="shortcut icon" href="https://fastt.cn/favicon.ico?v=1573031195522">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link href="https://cdn.remixicon.com/releases/v1.3.1/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">

<link rel="stylesheet" href="https://fastt.cn/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Zycin | GeekBlog - Atom Feed" href="https://fastt.cn/atom.xml">


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-150684183-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-150684183-1');
</script>


  </head>
  <body>
    <div id="app" class="main px-4 flex flex-col lg:flex-row">
      <div id="sidebar" class="sidebar-wrapper lg:static lg:w-1/4">
  <div class="lg:sticky top-0">
    <div class="sidebar-content">
      <div class="flex lg:block p-4 lg:px-0 items-center fixed lg:static lg:block top-0 right-0 left-0 bg-white z-50">
        <i class="remixicon-menu-2-line lg:mt-4 text-2xl cursor-pointer animated fadeIn" onclick="openMenu()"></i>
        <a href="https://fastt.cn">
          <img class="animated fadeInLeft avatar rounded-lg mx-4 lg:mt-32 lg:mx-0 mt-0 lg:w-24 lg:h-24 w-12 w-12" src="https://fastt.cn/images/avatar.png?v=1573031195522" alt="">
        </a>
        <h1 class="animated fadeInLeft lg:text-4xl font-extrabold lg:mt-8 mt-0 text-xl" style="animation-delay: 0.2s">Zycin | GeekBlog</h1>
      </div>
      
        <div class="animated fadeInLeft" style="animation-delay: 0.4s">
          <p class="my-4 text-gray-600 font-light hidden lg:block">
            æ–‡ç« ç›®å½•
          </p>
          <div class="toc-container hidden lg:block">
            <ul class="markdownIt-TOC">
<li><a href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B">æ¨¡å—åŒ–ç¼–ç¨‹</a>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%A8%A1%E5%9D%97%E5%8C%96">ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–</a></li>
<li><a href="#es6%E6%A8%A1%E5%9D%97%E8%A7%84%E8%8C%83">ES6æ¨¡å—è§„èŒƒ</a>
<ul>
<li><a href="#export%E8%AF%AD%E5%8F%A5">exportè¯­å¥</a></li>
<li><a href="#import-%E8%AF%AD%E5%8F%A5">import è¯­å¥</a></li>
</ul>
</li>
<li><a href="#cmd%E6%A8%A1%E5%9D%97%E8%A7%84%E8%8C%83">CMDæ¨¡å—è§„èŒƒ</a>
<ul>
<li><a href="#exports%E7%9A%84%E4%BD%BF%E7%94%A8">exportsçš„ä½¿ç”¨</a></li>
<li><a href="#require%E7%9A%84%E4%BD%BF%E7%94%A8">requireçš„ä½¿ç”¨</a></li>
</ul>
</li>
<li><a href="#amd%E6%A8%A1%E5%9D%97%E8%A7%84%E8%8C%83">AMDæ¨¡å—è§„èŒƒ</a></li>
</ul>
</li>
<li><a href="#node%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F">nodeæ¨¡å—ç³»ç»Ÿ</a></li>
<li><a href="#packagejson">package.json</a>
<ul>
<li><a href="#scripts">scripts</a>
<ul>
<li><a href="#%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99shell">å¦‚ä½•ç¼–å†™shell</a></li>
<li><a href="#%E6%89%A7%E8%A1%8Cnpm%E8%84%9A%E6%9C%AC">æ‰§è¡Œnpmè„šæœ¬</a></li>
</ul>
</li>
<li><a href="#dependencies">dependencies</a></li>
</ul>
</li>
<li><a href="#package-lockjson">package-lock.json</a></li>
<li><a href="#npm%E7%9A%84%E4%BD%BF%E7%94%A8">npmçš„ä½¿ç”¨</a>
<ul>
<li><a href="#npm%E5%AE%98%E7%BD%91">npmå®˜ç½‘</a></li>
<li><a href="#npm%E6%8C%87%E4%BB%A4">npmæŒ‡ä»¤</a></li>
<li><a href="#npm%E9%85%8D%E7%BD%AE">npmé…ç½®</a></li>
</ul>
</li>
<li><a href="#npx%E7%9A%84%E4%BD%BF%E7%94%A8">npxçš„ä½¿ç”¨</a>
<ul>
<li><a href="#%E5%8A%A0%E8%BD%BD%E8%84%9A%E6%9C%AC">åŠ è½½è„šæœ¬</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">ä½¿ç”¨åœºæ™¯</a>
<ul>
<li><a href="#%E4%B8%80%E6%AC%A1%E6%80%A7%E7%9A%84%E5%91%BD%E4%BB%A4">ä¸€æ¬¡æ€§çš„å‘½ä»¤</a></li>
<li><a href="#%E5%88%87%E6%8D%A2node%E7%89%88%E6%9C%AC">åˆ‡æ¢nodeç‰ˆæœ¬</a></li>
<li><a href="#%E5%BC%80%E5%90%AF%E6%9C%8D%E5%8A%A1">å¼€å¯æœåŠ¡</a></li>
</ul>
</li>
<li><a href="#%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4">å¸¸ç”¨æŒ‡ä»¤</a></li>
</ul>
</li>
<li><a href="#cnpm%E4%BB%A3%E7%90%86">cnpmä»£ç†</a></li>
</ul>

          </div>
        </div>
      
    </div>
  </div>
</div>

<div class="menu-container">
  <i class="remixicon-arrow-left-line text-2xl cursor-pointer animated fadeIn close-menu-btn" onclick="closeMenu()"></i>
  <div>
    
      
        <a href="/" class="menu" style="animation-delay: 0s">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu" style="animation-delay: 0.2s">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu" style="animation-delay: 0.4s">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu" style="animation-delay: 0.6000000000000001s">
          å…³äº
        </a>
      
    
  </div>
  <div class="site-footer">
    <div class="py-4 text-gray-700"><div
			class="animated fadeInLeft social-container hidden lg:block"
			style="animation-delay: 0.6s"
		>
			<a
				href="https://github.com/zycin/"
				target="_blank"
				class="mr-4 text-xl text-gray-400 font-light hover:text-gray-900"
			>
				<i class="remixicon-github-line"></i>
			</a>

			<a
				href="http://wpa.qq.com/msgrd?v=3&amp;uin=785227561&amp;site=qq&amp;menu=yes"
				target="_blank"
				class="mr-4 text-xl text-gray-400 font-light hover:text-gray-900"
			>
				<i class="remixicon-qq-line"></i>
			</a>
		</div>

Powered by <a href="https://github.com/zycin" target="_blank">Zycin</a></div>
    <a class="rss" href="https://fastt.cn/atom.xml" target="_blank">RSS</a>
  </div>
</div>
<div class="mask" onclick="closeMenu()">
</div>
      <div class="content-wrapper py-32 lg:p-8 lg:w-3/4 post-detail animated fadeIn">
        <h1 class="text-3xl font-bold lg:mt-16">æ¨¡å—åŒ–å’Œnpm</h1>
        <div class="text-sm text-gray-700 lg:my-8">
          2019-10-10 / 28 min read
        </div>
        
          <img class="post-feature-image rounded-lg mx-auto my-4" src="https://fastt-1252391792.file.myqcloud.com/module-npm.jpg" alt="">
        
        <div class="post-content yue">
          <p>æ­¤ç¯‡æ–‡ç« ä»‹ç»<br>
<strong><code>ES6çš„æ¨¡å—</code></strong> <strong><code>nodemæ¨¡å—</code></strong> <code>CMDå’ŒAMD</code> <code>npmçš„ä½¿ç”¨</code><br>
begin enjoyğŸ‘‡</p>
<!-- more -->
<h1 id="æ¨¡å—åŒ–ç¼–ç¨‹">æ¨¡å—åŒ–ç¼–ç¨‹</h1>
<h2 id="ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–">ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–</h2>
<p>æ‰€æœ‰çš„è¯­è¨€å¹³å°ï¼Œåªè¦å…¶å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼Œåˆ™æˆ‘ä»¬è¯´å®ƒæ˜¯ä½¿ç”¨æ¨¡å—ç¼–ç¨‹ï¼š</p>
<ul>
<li>æ–‡ä»¶ä½œç”¨åŸŸ
<ul>
<li>ä¹Ÿå«<mark>æ¨¡å—ä½œç”¨åŸŸ</mark>ï¼Œå³æ¨¡å—æ–‡ä»¶å…·æœ‰<strong>å°è£…æ€§</strong>ï¼Œæ–‡ä»¶å†…å®¹åªèƒ½åœ¨å†…éƒ¨ä½¿ç”¨ è€Œä¸æ˜¯åœ¨å¤–éƒ¨è®¿é—®</li>
</ul>
</li>
<li>åŠ è½½ä¸å¯¼å‡º
<ul>
<li>ä½¿ç”¨ä¸“é—¨çš„è¯­æ³• å¯¼å‡ºæ¥å£åˆ—è¡¨ï¼šexportè¯­æ³•ã€exportså¯¹è±¡ã€module.exportsç­‰</li>
<li>ä½¿ç”¨ä¸“é—¨çš„æ–¹æ³• åŠ è½½æ¨¡å—æ–‡ä»¶ï¼šrequireã€includeã€importç­‰ã€‚</li>
</ul>
</li>
</ul>
<p>ç›®å‰ä¸ºæ­¢ï¼Œå…³äºå‰ç«¯ æˆ‘ä»¬å­¦è¿‡çš„è§„èŒƒæˆ–è€…è§„åˆ™æœ‰ï¼š</p>
<ul>
<li>æ ¸å¿ƒè¯­æ³•ECMAScriptæ”¯æŒçš„æ¨¡å—è¯­æ³•ï¼ŒES6ä»¥åå¯ä»¥ä½¿ç”¨ï¼Œä½†åœ¨Nodeä¸­æ”¯æŒä¸è¶³</li>
<li>ç¬¬ä¸‰æ–¹åº“ requireJSè§„èŒƒï¼Œé€‚ç”¨äºå®¢æˆ·ç«¯æµè§ˆå™¨ç¯å¢ƒçš„å¼‚æ­¥åŠ è½½æœºåˆ¶ï¼Œè®©å‰ç«¯å…·å¤‡æ¨¡å—åŒ–ç¼–ç¨‹çš„èƒ½åŠ›</li>
<li>ç¬¬ä¸‰æ–¹åº“ CommonJSè§„èŒƒï¼Œé€‚ç”¨äºæœåŠ¡ç«¯ç¯å¢ƒçš„æ¨¡å—åŒæ­¥åŠ è½½æœºåˆ¶ï¼Œä¹Ÿæ˜¯Nodeæ¨¡å—åŠ è½½é‡‡ç”¨çš„è§„èŒƒ</li>
</ul>
<h2 id="es6æ¨¡å—è§„èŒƒ">ES6æ¨¡å—è§„èŒƒ</h2>
<p>es6æ–°å¢è¯­æ³•ç”¨äºæ¨¡å—åŒ–ç¼–ç¨‹ï¼Œä½¿å¾—å‰ç«¯å·¥ç¨‹çš„ç»“æ„æ›´ä¸ºåˆç†ï¼Œç»´æŠ¤æ€§å’Œæ‰©å±•æ€§å¢å¼ºï¼Œä½†ç›®å‰åœ¨nodeä¸­æ”¯æŒä¸è¶³ï¼Œå¦‚æœä¸€å®šè¦åœ¨nodeä¸­ä½¿ç”¨es6çš„æ¨¡å—è§„èŒƒï¼Œå¯ä»¥é€šè¿‡babelç”Ÿæˆã€‚</p>
<h3 id="exportè¯­å¥">exportè¯­å¥</h3>
<p>åœ¨å®¢æˆ·ç«¯ç¯å¢ƒä¸­ï¼Œæ–‡ä»¶é»˜è®¤æ²¡æœ‰ä½œç”¨åŸŸå¯ä»¥é€šè¿‡scriptç›´æ¥å¼•å…¥ã€‚å½“æ–‡ä»¶ä¸­å­˜åœ¨exportæˆ–è€…importè¯­æ³•æ—¶åˆ™è¢«è®¤ä¸ºæ˜¯æ¨¡å—æ–‡ä»¶å¹¶ä¸”å…·æœ‰å°è£…æ€§ï¼Œexportç”¨æ¥å£°æ˜å¼€æ”¾æ¥å£çš„åˆ—è¡¨ï¼Œå…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>ä½¿ç”¨exportç›´æ¥å¯¼å‡ºå®šä¹‰ï¼Œé€šè¿‡åœ¨åˆ›å»ºè¯¥å†…å®¹çš„ä»£ç å—å‰é¢æ·»åŠ exportå…³é”®å­—</p>
<pre><code class="language-javascript">//demo.js
//ä¸€ä¸ªæ–‡ä»¶ä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªexport
export let foo = &quot;foo&quot;;
export function bar() {
    return &quot;bar&quot;;
};
</code></pre>
</li>
<li>
<p>exportå¯¼å‡ºæ¥å£åˆ—è¡¨ï¼Œä»¥<code>{}</code>å½¢å¼å­˜æ”¾æ¥å£é›†åˆã€‚æ­¤å¤„çš„{}éå¯¹è±¡çš„å£°æ˜ï¼Œåªæ˜¯é›†åˆè¯­æ³•</p>
<pre><code class="language-javascript">let foo = &quot;foo&quot;;
function bar () {
    return &quot;bar&quot;;
}

export {
    foo,
    bar
};  //æ­¤å¤„ä¸æ˜¯å¯¹è±¡çš„ç®€æ´å±æ€§ï¼Œè€Œæ˜¯{}é›†åˆ
    //ä¸èƒ½ä½¿ç”¨{fo : foo, ba : bar}
    //å¯ä»¥ä½¿ç”¨asç»™æ¥å£è®¾ç½®åˆ«å

export {
    foo as fo,
    bar as ba,
}
</code></pre>
</li>
<li>
<p><code>export default</code>ç”¨æ¥è®¾ç½®é»˜è®¤æ¥å£ï¼Œè¿™æ ·åœ¨åŠ è½½é¡µé¢æ—¶å°±æ— éœ€å£°æ˜åˆ—è¡¨ï¼Œç›´æ¥æ¥æ”¶å³å¯ã€‚</p>
<pre><code class="language-javascript">//demo.js
let foo = &quot;foo&quot;;
function bar() {
    
}

//å°†fooä½œä¸ºé»˜è®¤æ¥å£å¯¼å‡º
//export default foo;	
//export defaultåªèƒ½å‡ºç°ä¸€æ¬¡ å¦‚æœè¦è¿”å›å¤šä¸ªæ¥å£ å¯ä»¥å°†å®ƒä»¬æ”¾å…¥å¯¹è±¡ä¸­
export default {
    foo,
    bar,
} //æ­¤å¤„ä¸ºå¯¹è±¡çš„ç®€æ´å†™æ³•

//åŠ è½½é¡µé¢ä¸­ä½¿ç”¨
import demo from './demo.js';
console.dir(demo);	//demoä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªæ¥å£

</code></pre>
</li>
<li>
<p>æœ€åè¦æ³¨æ„ï¼Œexportè¯­å¥å¿…é¡»å¤„äºæ¨¡å—æ–‡ä»¶é¡¶å±‚ä»£ç ä¸­ï¼Œä¸èƒ½æ”¾åœ¨å—çº§ä½œç”¨åŸŸä¸­ã€‚</p>
</li>
</ul>
<h3 id="import-è¯­å¥">import è¯­å¥</h3>
<p>é¡µé¢ä¸­åŠ è½½æ¨¡å—çš„scriptä»£ç æ®µéœ€è¦å£°æ˜typeç±»å‹ä¸ºmoduleä»¥åŒºåˆ«æ™®é€šçš„è„šæœ¬ï¼›</p>
<p>å…¶æ¬¡è¦ä»¥æœåŠ¡å™¨åœ°å€æ¥è¯·æ±‚æ¨¡å—æ–‡ä»¶ï¼Œå¦åˆ™ä¼šè¢«è·¨åŸŸæ‹¦æˆªã€‚</p>
<p>es6ä¸­ä½¿ç”¨importå¯¼å…¥æ¨¡å—æ–‡ä»¶å¹¶æ¥æ”¶æ¥å£åˆ—è¡¨ã€‚</p>
<ul>
<li>
<p><code>import {add, minus} from './math.js'</code> å…¶ä¸­ç›¸å¯¹è·¯å¾„ä¸­çš„<code>./</code>ä¸å¯çœç•¥ï¼Œ<code>.js</code>åç¼€ä¹Ÿä¸å¯çœç•¥ ã€‚</p>
<pre><code class="language-javascript">//math.js
export function add(x, y) {
    return x + y;
}

export function minus(x, y) {
    return x - y;
}
</code></pre>
<pre><code class="language-html">&lt;!--index.htmlå¿…é¡»ä»¥æœåŠ¡å™¨åœ°å€æ¥è¿è¡Œ--&gt;
&lt;script type=&quot;module&quot;&gt;
	import {add, minu} from &quot;./math.js&quot;;
    console.log(add, minu);
&lt;/script&gt;
</code></pre>
</li>
<li>
<p><code>import {add, minus as min } from './math.js'</code> å¯¼å…¥æ—¶ä½¿ç”¨<code>as</code>é‡å‘½åæ¥å£åç§°</p>
<pre><code class="language-javascript">//math.js
function add(x, y) {
    return x + y;
}

function minus(x, y) {
    return x - y;
}

export {
	add,
    minus
}
</code></pre>
<pre><code class="language-html">
&lt;script&gt;
	import {add as sum, minus as mus} math from './math.js';
    console.log(sum, mus);
&lt;/script&gt;

</code></pre>
</li>
<li>
<p><code>import * as math from './math.js'</code> å°†æ¨¡å—æˆå‘˜å­˜å…¥modå¯¹è±¡ä¸­ä½¿ç”¨ã€‚</p>
<pre><code class="language-javascript">//math.js
function add(x, y) {
    return x + y;
}

function minus(x, y) {
    return x - y;
}

export {
	add,
    minus
}
</code></pre>
<pre><code class="language-html">&lt;script&gt;
	import * as math from './math.js';
    console.log(math); //{add, minus}
&lt;/script&gt;
</code></pre>
</li>
<li>
<p><code>import math from './math.js'</code> ä½¿ç”¨äº†<code>export default</code>æ–¹å¼å¯¼å‡ºçš„æ¥å£</p>
<pre><code class="language-javascript">//math.js
export default {
    add (x, y) {
        return x + y;
    },
    
    minus (x, y) {
        return x - y;
    }
}
</code></pre>
<pre><code class="language-html">&lt;script&gt;
	import math from './math.js';
    console.log(math);
&lt;/script&gt;
</code></pre>
</li>
</ul>
<h2 id="cmdæ¨¡å—è§„èŒƒ">CMDæ¨¡å—è§„èŒƒ</h2>
<p>CMDæ¨¡å—è§„èŒƒç›¸å¯¹äºAMDï¼Œå¾—åæ¥è‡ª<code>CommonJS</code>ã€‚CommonJSæ˜¯é€‚ç”¨äºæœåŠ¡ç«¯çš„<mark>åŒæ­¥é£æ ¼</mark>çš„æ¨¡å—åŠ è½½æœºåˆ¶ï¼Œä¹Ÿæ˜¯Nodeé‡‡ç”¨çš„è§„èŒƒã€‚åœ¨CommonJSæ¨¡å—è§„èŒƒä¸­ï¼Œ<strong>ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å— å…·æœ‰å°è£…æ€§</strong>ï¼ˆä½œç”¨åŸŸï¼‰ã€‚æ¯ä¸ªæ–‡ä»¶æœ‰ä¸€ä¸ª<strong>éšå¼å£°æ˜</strong>çš„<code>module.exports</code>å¯¹è±¡ï¼Œç”¨æ¥æŒ‚è½½æ¥å£ã€‚æ¥ä¸‹æ¥åœ¨é¡¹ç›®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨<code>require('æ¨¡å—è·¯å¾„')</code>è½½å…¥è¯¥æ¨¡å—ã€‚</p>
<h3 id="exportsçš„ä½¿ç”¨">exportsçš„ä½¿ç”¨</h3>
<ul>
<li>
<p>åœ¨CommonJSä¸­ï¼Œæ¯ä¸ªæ¨¡å—æ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªéšå¼å£°æ˜çš„<code>module.exports</code>å¯¹è±¡ä»¥åŠä¸€ä¸ªå¼•ç”¨å®ƒçš„<code>exports</code>å¯¹è±¡ï¼Œç”¨æ¥æŒ‚è½½æ¥å£ -  å¯¹è±¡æ‰©å±•ï¼›å¦‚æœæ¨¡å—æ–‡ä»¶æœªè®¾ç½®module.exportsæˆ–è€…exportsåˆ™ä¸ºä¸€ä¸ª<strong>ç©ºå¯¹è±¡</strong>ã€‚</p>
<pre><code class="language-javascript">//mode.js
let foo = &quot;foo&quot;;

function bar() {

}

//æ¨¡å—æ–‡ä»¶å…·æœ‰å°è£…æ€§ - æ–‡ä»¶ä½œç”¨åŸŸ
console.log(&quot;hello world&quot;);

//æ¯ä¸ªæ¨¡å—æ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªmodule.exportså¯¹è±¡ ç”¨æ¥æŒ‚è½½æ¥å£
// module.exports.foo = foo;
// module.exports.bar = bar;
// console.log(module.exports);

//exportså¼•ç”¨äº†module.exportså¯¹è±¡ ä¾¿äºä½¿ç”¨
// exports = module.exports;
console.log(exports == module.exports); //true

//å› æ­¤å¯ä»¥ç›´æ¥ç®€åŒ–å¯¼å‡ºæ¥å£åˆ—è¡¨çš„è¿‡ç¨‹ä¸ºï¼š
exports.foo = foo;
exports.bar = bar;
</code></pre>
<p>åœ¨é¡¹ç›®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨require('æ¨¡å—æ ‡è¯†ç¬¦')è½½å…¥è¯¥æ¨¡å—ï¼Œå¹¶å®šä¹‰å˜é‡æ¥æ¥æ”¶module.exportsçš„å†…å®¹ï¼š</p>
<pre><code class="language-javascript">//index.js
const mode  = require('./mode');
console.log(mode);	//{foo : &quot;hello world&quot;, bar : function () {}}
</code></pre>
</li>
<li>
<p>é™¤äº†æ‰©å±•çš„æ–¹å¼å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é‡å†™<code>module.exports</code>å¯¹è±¡ä¸ºä¸€ä¸ªæ–°å€¼ï¼Œè¿™æ ·requireæ¥æ”¶åˆ°çš„å³ä¸ºè¯¥å€¼ï¼Œå®ƒä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç‚¹ä¼˜åŠ¿ï¼š</p>
<ul>
<li>å½“æ¨¡å—ä¸­ åªæœ‰ä¸€ä¸ªæ¥å£æ—¶ ï¼ˆä¾‹å¦‚ å®šä¹‰ç±»çš„æ¨¡å—æ–‡ä»¶ï¼‰ï¼Œå¯ä»¥ç›´æ¥å°†è¯¥ç±»å¯¼å‡º è€Œä¸æ˜¯ä½œä¸ºæ¥å£å¯¹è±¡æˆå‘˜ã€‚</li>
<li>å½“æ¨¡å—ä¸­ æ¥å£è¾ƒå¤šæ—¶ å¯ä»¥å°†å®ƒä»¬é›†åˆåˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ ç„¶åä½œä¸º<code>module.exports</code>çš„æ–°å€¼ã€‚</li>
</ul>
<pre><code class="language-javascript">//comm.Rectangle.js
//å®šä¹‰çŸ©å½¢æ“ä½œç±»æ¨¡å—
class Rectangle {
    constructor(width, height) {
        this.w = width;
        this.h = height;
    }

    area() {
        return this.w * this.h;
    }

    perimter() {
        return 2 * (this.w + this.h);
    }
}

//é‡å†™module.exportså¯¹è±¡ä¸ºè¯¥æ¥å£å†…å®¹
module.exports = Rectangle;   

/*
* æ­¤å¤„å¦‚æœä½¿ç”¨exports = Rectangleåˆ™æ— æ•ˆ
* å› ä¸ºçœŸæ­£èƒ½å¤Ÿå¯¼å‡ºæ¥å£çš„æ˜¯module.exports
* exportsæ˜¯å› ä¸ºå¼•ç”¨module.exportsè€Œèƒ½å¯¼å‡ºæ¥å£
* ç°åœ¨é‡ç½®exportså°†ä½¿å¾—å…¶ä¸å†å…·å¤‡æ¥å£å¯¼å‡ºçš„èƒ½åŠ›

* åŒç†ï¼Œmodule.exportsé‡ç½®å ä¹Ÿä¼šä½¿exportsä¸§å¤±æŒ‚è½½æ¥å£çš„èƒ½åŠ›
*/

//exportsä¸ŠæŒ‚è½½çš„ä¸€åˆ‡æ¥å£éƒ½æ— æ•ˆ
exports.a = &quot;hello&quot;;
exports.b = &quot;world&quot;;
</code></pre>
<pre><code class="language-javascript">//index.js
const Rectangle = require(&quot;./comm.Rectangle.js&quot;);
console.log(Rectangle);	
</code></pre>
<p>å¯¹äº<code>module.exports</code>æˆ–è€…exportså¯¼å‡ºçš„å¤šæ¥å£ï¼Œå¯ä»¥åœ¨é¡¹ç›®æ–‡ä»¶ä¸­ä½¿ç”¨è§£æ„èµ‹å€¼çš„æ–¹å¼ç›´æ¥æå–å‡ºæ¥ï¼š</p>
<pre><code class="language-javascript">//comm.math.js
let x = 10,
    y = 20;

function add() {
    return x + y;
}

function minus() {
    return x - y;
}

module.exports = {
    add,
    minus,
}//æ­¤å¤„çš„{}æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨äº†ç®€æ´å±æ€§
</code></pre>
<pre><code class="language-javascript">let {add, minus} = require('./comm.math.js');
console.log(add, minus);
</code></pre>
</li>
</ul>
<h3 id="requireçš„ä½¿ç”¨">requireçš„ä½¿ç”¨</h3>
<p>åœ¨ä¸€äº›å¹³å°ä¸­ï¼Œå­˜åœ¨require()ä¸require_once() è¿™æ ·ä¸¤ä¸ªç”¨äºåŠ è½½æ¨¡å—çš„å‡½æ•°ï¼›å…¶ä¸­require()ä¼šé‡å¤åŠ è½½è¢«å¼•å…¥çš„æ–‡ä»¶ï¼ˆå¤šæ¬¡æ‰§è¡Œï¼‰ï¼Œè€Œrequire_once()åˆ™åœ¨æ¯æ¬¡åŠ è½½å‰éªŒè¯å½“å‰æ˜¯å¦å·²æœ‰åŠ è½½çš„æ–‡ä»¶ï¼Œå¦‚æœå·²æœ‰åˆ™ä¸å†åŠ è½½ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªæ–‡ä»¶æœ€å¤šåªåŠ è½½ä¸€æ¬¡ï¼›è€Œnodeä¸­çš„requireä¹Ÿæ˜¯<strong>åªåŠ è½½ä¸€æ¬¡</strong>ã€‚</p>
<pre><code class="language-php">//mode.php
echo &quot;hello world&quot;;

//index.php
require(&quot;mode.php&quot;);//è¾“å‡º include
require(&quot;mode.php&quot;);//è¾“å‡º include_once

require_once(&quot;mode.php&quot;);	//ä¸å†è¾“å‡º
require_once(&quot;mode.php&quot;);	//ä¸å†è¾“å‡º
</code></pre>
<pre><code class="language-javascript">//mode.js
console.log(&quot;hello world&quot;);

//index.js
require(&quot;./mode&quot;);	//åªæ‰§è¡Œä¸€æ¬¡
require(&quot;./mode&quot;);
</code></pre>
<h2 id="amdæ¨¡å—è§„èŒƒ">AMDæ¨¡å—è§„èŒƒ</h2>
<p>requireJS æ˜¯AMDé£æ ¼çš„æ¨¡å—å¼€å‘è§„èŒƒï¼Œæ‰€è°“<code>AMD</code>æ˜¯æŒ‡<mark>å¼‚æ­¥æ¨¡å—å®šä¹‰è§„èŒƒ</mark>ï¼Œå®ƒéå¸¸é€‚ç”¨äºå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ç¯å¢ƒã€‚</p>
<p>æ¨¡å—å¼€å‘æ˜¯æœåŠ¡ç«¯å¿…å¤‡çš„æŠ€æœ¯ï¼Œéšç€å‰ç«¯å‘å±•å’Œå¤§è§„æ¨¡çš„å·¥ç¨‹åŒ–åº”ç”¨ï¼ŒåµŒå…¥é¡µé¢çš„è„šæœ¬è¶Šæ¥è¶Šå¤šï¼Œå¹¶ä¸”ç›¸äº’ä¾èµ–ï¼Œå› æ­¤æ— è®ºæ˜¯é¡¹ç›®çš„<strong>ç®¡ç†</strong>è¿˜æ˜¯ä»£ç çš„<strong>é‡ç”¨</strong>ï¼Œ éƒ½éœ€è¦å€ŸåŠ©äºæ¨¡å—åŒ– ä»¥æ­¤å¢å¼ºé¡¹ç›®çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚</p>
<p>ä¹‹å‰åœ¨æœåŠ¡ç«¯Nodeä¸­ï¼Œä½¿ç”¨äº†CommonJSçš„è§„èŒƒï¼Œä¹Ÿå«CMDåŒæ­¥æ¨¡å—å®šä¹‰è§„èŒƒã€‚åœ¨CMDä¸­ï¼ŒåŒæ­¥çš„çº¿ç¨‹å»åŠ è½½æ¨¡å—ä¼šäº§ç”Ÿé˜»å¡ï¼Œä½†æ˜¯æ¯•ç«Ÿ<mark>æ¨¡å—éƒ½åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨æˆ–è€…åŒä¸€ä¸ªé¡¹ç›®ä¸­</mark>ï¼ŒåŠ è½½ä¸ä¼šæœ‰å»¶è¿Ÿ ä¹Ÿå°±éš¾ä»¥å‘ç°è¿™ç§é˜»å¡ï¼Œé™¤éæ¨¡å—åŠ è½½å‘ç”Ÿé”™è¯¯ï¼Œè¿™ç§é˜»å¡æ‰æ˜¾è€Œæ˜“è§ã€‚</p>
<pre><code class="language-javascript">//server.js
const fs = require(&quot;fs&quot;);	//æ ¸å¿ƒæ¨¡å— -&gt; node.exe
const template = require(&quot;art-template&quot;); //åŠ è½½ç¬¬ä¸‰åŒ… -&gt; ./node_modules/art-template
const demo = require(&quot;./demo&quot;);//è‡ªå®šä¹‰æ¨¡å— -&gt; ./demo.js
</code></pre>
<p>åœ¨å‰ç«¯æ¨¡å—åŒ–å¼€å‘ä¸­ï¼Œç”±äºéœ€è¦è¿œç¨‹è¯·æ±‚æœåŠ¡ç«¯èµ„æº <strong>ä¼ ç»Ÿçš„scriptåŒæ­¥è¯·æ±‚ åœ¨ç½‘ç»œä¸ä½³çš„æƒ…å†µä¸‹ å®¹æ˜“äº§ç”Ÿé˜»å¡</strong>ï¼Œå› æ­¤å¿…é¡»ä½¿ç”¨<mark>å¼‚æ­¥</mark>çš„æ–¹å¼åŠ è½½ï¼š</p>
<pre><code class="language-html">&lt;script src=&quot;jquery.js&quot; async=&quot;true&quot;&gt;&lt;/script&gt;
</code></pre>
<p>â€‹	å¦‚æœè¦ä»¥å¼‚æ­¥æ–¹å¼åŠ è½½ï¼Œå°±è¦è€ƒè™‘æ–‡ä»¶å’Œä»£ç ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ä¹‹æ‰€ä»¥å¾ˆå¤šæ—¶å€™ æˆ‘ä»¬ä»¥åŒæ­¥æ–¹å¼å¼•å…¥æ¨¡å—æˆ–è€…åº“æ–‡ä»¶ï¼Œæ˜¯å› ä¸ºåç»­ä»£ç çš„æ‰§è¡Œ å¿…é¡»ä¾èµ–è¿™ä¸ªæ¨¡å—æ–‡ä»¶ã€‚ç°åœ¨ å¦‚æœå¼‚æ­¥åŠ è½½ åŠ¿å¿…è¦å°†ä¾èµ–çš„ä»£ç  ä½œä¸ºè¯¥æ¨¡å—åŠ è½½å®Œæ¯•åçš„å›è°ƒå‡½æ•°æ¥æ‰§è¡Œï¼Œç›¸å½“äºè¿™æ ·ï¼š</p>
<pre><code class="language-html">&lt;script src=&quot;jquery.js&quot; async=&quot;true&quot; onload=&quot;todo();&quot;&gt;&lt;/script&gt;

&lt;script&gt;

   function todo() {
   	//æ‰€æœ‰ä¾èµ–jqueryçš„ä»£ç  å¿…é¡»åœ¨æ­¤å¤„æ‰§è¡Œ
   	
   }

&lt;/script&gt;
</code></pre>
<p>requireJSå¾ˆå¥½çš„è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œå¹¶æ›´åŠ æ™ºèƒ½å’Œé«˜æ•ˆã€‚requireJSä¸­ï¼Œæ¨¡å—ä½¿ç”¨<code>define</code>å®šä¹‰ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>ä¸€æ˜¯è¯¥æ¨¡å—ä¾èµ–çš„å…¶ä»–æ¨¡å—ï¼Œéœ€è¦å…ˆå¼‚æ­¥åŠ è½½è¿›æ¥</li>
<li>å¦ä¸€ä¸ªæ˜¯æ¨¡å—çš„å®šä¹‰ä»£ç ï¼Œä½œä¸ºå…¶ä»–ä¾èµ–æ¨¡å—éƒ½åŠ è½½å®Œæ¯•åçš„å›è°ƒå‡½æ•°</li>
</ul>
<p>requireJSæ¨¡å—çš„å°è£…æ€§æ˜¯é€šè¿‡<mark>å‡½æ•°ä½œç”¨åŸŸ</mark>å®ç°çš„ï¼Œæ¥ä¸‹æ¥ éœ€è¦è¿”å›ä¸€ä¸ª<strong>å…¬æœ‰å¯¹è±¡</strong>å­˜å‚¨æ¥å£åˆ—è¡¨å¹¶è¿”å›ã€‚</p>
<pre><code class="language-javascript">//mode.js

//è¯¥æ¨¡å—ä¾èµ–jqueryï¼Œå½“jqueryåŠ è½½å®Œæ¯•å æ‰§è¡Œå›è°ƒå¹¶æ¥æ”¶jqueryä¸º$å¯¹è±¡

define(['jquery'], function ($) {
    //---æ¨¡å—æ ¸å¿ƒä»£ç ---
    let foo = &quot;foo&quot;;
    function bar() {};

    //---è¿”å›å…¬æœ‰æ¥å£---
    return {
        foo, 
        bar
    } //ä½¿ç”¨ç®€æ´å±æ€§ æ¨¡æ‹Ÿes6 exportså¯¼å‡ºçš„æ¥å£åˆ—è¡¨
});
</code></pre>
<p>å®šä¹‰å¥½çš„æ¨¡å—å’Œæ¥å£ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨requireå‡½æ•°å¼•å…¥ï¼Œåœ¨requireå¼•å…¥ä¹‹å‰ éœ€è¦ä½¿ç”¨<code>require.config()</code>é…ç½®æ¨¡å—å’Œæ–‡ä»¶è·¯å¾„çš„æ˜ å°„ è¿™æ ·æ‰èƒ½æ›´å¥½çš„åŠ è½½å’Œä½¿ç”¨æ¨¡å—ã€‚</p>
<pre><code class="language-html">&lt;!--index.htmlä¸­ é¦–å…ˆè½½å…¥requireåº“æ–‡ä»¶--&gt;
&lt;script src=&quot;require.js&quot; async=&quot;true&quot;&gt;&lt;/script&gt;
//å¦‚æœé¡µé¢ä¸­çš„jsä½œä¸ºå¤–é“¾æ–‡ä»¶ è¿˜å¯ä»¥å£°æ˜data-mainå±æ€§
&lt;script src=&quot;require.js&quot; async=&quot;true&quot; data-main=&quot;js/index&quot;&gt;&lt;/script&gt;
</code></pre>
<pre><code class="language-javascript">//index.js
require.config({
    baseUrl : &quot;./modules&quot;,	//æ¨¡å—æ ¹ç›®å½•
    paths : {
        jquery : &quot;./jquery-2.0.2.min&quot;,	//å¯ä»¥çœç•¥js
        foo : &quot;foo&quot;
    }
});

//ä¾æ¬¡è½½å…¥ä¾èµ–çš„æ¨¡å— ç„¶åæ‰§è¡Œé¡µé¢ä»£ç 
require([&quot;foo&quot;, &quot;jquery&quot;], function (f, $) {
    console.log(f, $);
    //é¡µé¢ç‰¹æ•ˆçš„ä»£ç 

});
</code></pre>
<h1 id="nodeæ¨¡å—ç³»ç»Ÿ">nodeæ¨¡å—ç³»ç»Ÿ</h1>
<p>nodeä¸­ä½¿ç”¨çš„æ¨¡å—ç³»ç»ŸåŒ…å«ä»¥ä¸‹å‡ ç§ï¼š</p>
<p>â€‹	1) æ ¸å¿ƒæ¨¡å—ï¼šfsã€httpã€urlã€querystringç­‰</p>
<p>â€‹	2) ç¬¬ä¸‰æ–¹æ¨¡å—ï¼šä½¿ç”¨npmä»å¤–éƒ¨ä¸‹è½½å®‰è£…çš„æ¨¡å—ï¼Œä¾‹å¦‚ art-template</p>
<p>â€‹	3) è‡ªå®šä¹‰æ¨¡å—ï¼šç”¨æˆ·è‡ªå·±å®šä¹‰çš„æ¨¡å—æ–‡ä»¶ï¼Œä¾‹å¦‚ math.jsã€mode.jsç­‰</p>
<p>è€Œrequireåœ¨å¼•å…¥ä¸Šè¿°æ¨¡å—æ—¶ï¼Œå¯ä»¥ä¼ å…¥ä¸¤ç§æ ¼å¼çš„æ¨¡å—æ ‡è¯†ï¼šè·¯å¾„å½¢å¼å’ŒåŒ…å</p>
<p>â€‹	<code>require('æ¨¡å—æ ‡è¯†ç¬¦')</code></p>
<ul>
<li>
<p>å½“ä¼ å…¥äº†ä¸€ä¸ªè·¯å¾„æ—¶ï¼ˆä»¥**./<strong>æˆ–è€…</strong>../**å¼€å¤´ï¼‰ è¡¨ç¤ºåŠ è½½æŒ‰ç…§è·¯å¾„åŠ è½½æ–‡ä»¶ ä¸€èˆ¬ç”¨äºè‡ªå®šä¹‰æ¨¡å—ä¸­ã€‚</p>
</li>
<li>
<p>å½“ä¼ å…¥ä¸€ä¸ªæ¨¡å—åæ—¶ï¼Œå°±æ˜¯å‚æ•°ä¸­åªæœ‰åç§°æ—¶ è¡¨ç¤ºåŠ è½½æ ¸å¿ƒæ¨¡å—æˆ–è€…ç¬¬ä¸‰æ–¹æ¨¡å—ã€‚æ­¤æ—¶çš„æ¨¡å—æ–‡ä»¶æ˜¯å­˜åœ¨äºNodeæ ¸å¿ƒæ–‡ä»¶ï¼ˆnodex.exeï¼‰ä¸­æˆ–è€…ä½¿ç”¨npmä¸‹è½½çš„node_modulesç›®å½•ä¸­ã€‚</p>
<ul>
<li>
<p><code>require('fs')</code>åŠ è½½æ ¸å¿ƒæ¨¡å—fsï¼Œ<code>fs.js</code>æ¨¡å—æ–‡ä»¶éšç€nodeç¯å¢ƒè¢«ç¼–è¯‘åˆ°<code>node.exe</code>æ–‡ä»¶ä¸­ã€‚è¿™é‡Œå¯ä»¥é€šè¿‡æºç æŸ¥çœ‹åˆ°è¯¥æ–‡ä»¶ã€‚</p>
</li>
<li>
<p><code>require(&quot;art-template&quot;)</code> åŠ è½½ç¬¬ä¸‰æ–¹æ¨¡å—åŒ…ï¼Œè¿™é‡Œçš„art-templateæ¨¡å—æ˜¯å­˜å‚¨äºnpmä¸‹è½½çš„åŒ…é‡Œé¢</p>
<p>æ¥ä¸‹æ¥å¼•å…¥åŒ…æ—¶ å®ƒæœ‰ä¸€å¥—æ˜ç¡®çš„æŸ¥æ‰¾æœºåˆ¶ï¼š</p>
<ol>
<li>é¦–å…ˆæŸ¥æ‰¾å½“å‰ç›®å½•çš„node_modulesï¼Œå®šä½<code>node_modules/åŒ…å/libs/package.json</code>åŒ…è¯´æ˜æ–‡ä»¶</li>
<li>æŸ¥æ‰¾é…ç½®é¡¹mainï¼Œmainç”¨äºæŒ‡å®šåŒ…çš„å…¥å£æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ç”¨äºè°ƒåº¦åŒ…èµ„æº å¹¶è¿”å›ä¸€ä¸ªæ¥å£å¯¹è±¡</li>
</ol>
<p>åŒç†ï¼Œæˆ‘ä»¬ä½¿ç”¨npmå®‰è£…jqueryï¼ŒæŸ¥çœ‹å®ƒçš„package.jsonæ–‡ä»¶ æ‰¾åˆ°mainé…ç½®çš„å…¥å£æ–‡ä»¶ï¼›å†æ¥ä¸‹æ¥ æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰åŒ… å¹¶ä½¿ç”¨requireåŠ è½½è¯¥åŒ…ã€‚æ³¨æ„requireä¸­ä¼ å…¥çš„æ˜¯åŒ…åã€‚</p>
<ol>
<li>
<p>å¦‚æœä¸Šè¿°è§„åˆ™ä¸èƒ½æœ‰æ•ˆçš„è¿è¡Œï¼Œä¾‹å¦‚ package.jsonä¸å­˜åœ¨æˆ–è€…æ²¡æœ‰mainé¡¹ï¼Œæˆ–è€…mainæŒ‡å®šæ–‡ä»¶ä¸å­˜åœ¨ï¼Œ æ­¤æ—¶å®ƒè¿˜æœ‰ä¸€ä¸ªå¤‡é€‰é¡¹ å°±æ˜¯ç›´æ¥æ‰¾åˆ°åŒ…ä¸­çš„<code>index.js</code>ä½œä¸ºé»˜è®¤å…¥å£æ–‡ä»¶ã€‚</p>
</li>
<li>
<p>ä¸Šè¿°æ¡ä»¶éƒ½ä¸æˆç«‹æ—¶ï¼Œå®ƒä¼šæ²¿ç€ä¸Šçº§ç›®å½•å±‚å±‚æŸ¥æ‰¾node_modules ç›´åˆ°ç£ç›˜æ ¹ç›®å½•ä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´å­˜åœ¨äºé¡¹ç›®é¡¶å±‚ç›®å½•node_modulesä¸­çš„æ¨¡å— å¯ä»¥åœ¨æ‰€æœ‰çš„é¡¹ç›®æ–‡ä»¶ä¸­ä½¿ç”¨require(åŒ…å)å¯¼å…¥ã€‚å› æ­¤ å»ºè®®å°†node_modulesæ”¾ç½®äºé¡¹ç›®<strong>æ ¹ç›®å½•</strong>ä¸­ã€‚</p>
</li>
</ol>
<pre><code class="language-shell">a
	node_modules/art-template
b
	require(&quot;art-template&quot;);	//æ‰¾ä¸åˆ° é™¤éä½¿ç”¨è·¯å¾„æŸ¥æ‰¾
	require(&quot;../a/node_modules/art-template/index.js&quot;); //å¯ä»¥æ‰¾åˆ°
</code></pre>
</li>
</ul>
</li>
</ul>
<h1 id="packagejson">package.json</h1>
<p><code>package.json</code>æ˜¯åŒ…è¯´æ˜æ–‡ä»¶ï¼Œå¯ç”¨äºé¡¹ç›®ä¸­ ç”¨æ¥æ·»åŠ é¡¹ç›®æè¿°ä»¥åŠç®¡ç†é¡¹ç›®ä¸­éœ€è¦ä¾èµ–çš„åŒ…ã€‚<code>package.json</code>æ–‡ä»¶å¯ä»¥é€šè¿‡<code>npm init</code>è‡ªåŠ¨ç”Ÿæˆï¼Œè¯¥å‘½ä»¤ä¼šä»¥<strong>å‘å¯¼</strong>çš„æ–¹å¼æç¤ºåŸºæœ¬çš„é…ç½®é¡¹ã€‚</p>
<pre><code class="language-shell">#åœ¨æ§åˆ¶å°æ‰§è¡Œnpm init
d:\Wamp\WWW\node\day3\web&gt;npm init
This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sensible defaults.
See `npm help json` for definitive documentation on these fields
and exactly what they do.

Use `npm install &lt;pkg&gt;` afterwards to install a package and
save it as a dependency in the package.json file.
Press ^C at any time to quit.

package name: (web) web
version: (1.0.0) 0.0.1
description: demo app
entry point: (index.js) inidex.js
test command:
git repository:
keywords:
author: lautin
license: (ISC)
About to write to d:\Wamp\WWW\node\day3\web\package.json:

{
  &quot;name&quot;: &quot;web&quot;,
  &quot;version&quot;: &quot;0.0.1&quot;,
  &quot;description&quot;: &quot;demo app&quot;,
  &quot;main&quot;: &quot;inidex.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,
    &quot;build&quot;: &quot;node server.js&quot;,
  },
  &quot;author&quot;: &quot;lautin&quot;,
  &quot;license&quot;: &quot;ISC&quot;
}

Is this OK? (yes) yes
</code></pre>
<ul>
<li>name</li>
<li>version</li>
<li>description</li>
<li>main</li>
<li>author</li>
<li>license</li>
</ul>
<h2 id="scripts">scripts</h2>
<p><code>package.json</code>æ–‡ä»¶ä¸­çš„<code>scripts</code>å­—æ®µç”¨æ¥å®šä¹‰è„šæœ¬å‘½ä»¤ï¼Œæ‰€æœ‰çš„è„šæœ¬å‘½ä»¤éƒ½æ˜¯shellçš„å¯æ‰§è¡Œå‘½ä»¤ã€‚</p>
<p><code>scripts</code>ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„æ¯ä¸ªå±æ€§å¯¹åº”ä¸€æ®µè¦è¿è¡Œçš„è„šæœ¬ã€‚ä¾‹å¦‚ï¼Œä¸Šé¢<code>build</code>å‘½ä»¤å¯¹åº”çš„è„šæœ¬æ˜¯&quot;node server.js&quot;ã€‚æ¥ä¸‹æ¥ä½¿ç”¨<code>npm run build</code>å³å¯å®ç°&quot;node server.js&quot;çš„æ•ˆæœã€‚</p>
<p>æ¯å½“æ‰§è¡Œ**<code>npm run</code>**å°±ä¼šè‡ªåŠ¨æ–°å»ºä¸€ä¸ª Shellï¼Œåœ¨è¿™ä¸ª Shell é‡Œé¢æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬å‘½ä»¤ã€‚å› æ­¤ï¼Œåªè¦æ˜¯ Shellï¼ˆä¸€èˆ¬æ˜¯ Bashï¼‰å¯ä»¥è¿è¡Œçš„å‘½ä»¤ï¼Œå°±å¯ä»¥å†™åœ¨ npm è„šæœ¬é‡Œé¢ã€‚</p>
<pre><code class="language-shell">$ npm run build #ç­‰åŒäºä¸‹é¢
$ node server.js
</code></pre>
<h3 id="å¦‚ä½•ç¼–å†™shell">å¦‚ä½•ç¼–å†™shell</h3>
<ul>
<li><strong>.bin</strong>ä¸­çš„å¯ç”¨ç¨‹åº</li>
</ul>
<p><code>node/modules/.bin</code>ç›®å½•ä¸­å­˜æ”¾äº†å½“å‰é¡¹ç›®ä¾èµ–ä¸­æ‰€æœ‰çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œè€Œåœ¨<code>npm run</code>æ–°å»ºçš„Shellä¸­ï¼Œä¼šå°†å½“å‰ç›®å½•ä¸‹<code>node_modules/.bin</code>ç›®å½•åŠ å…¥<code>PATH</code>å˜é‡ï¼Œæ‰§è¡Œç»“æŸåå†å°†<code>PATH</code>å˜é‡æ¢å¤åŸæ ·ã€‚</p>
<p>è¿™å°±æ„å‘³ç€ï¼Œå¯ä»¥åœ¨scriptsä¸­ç›´æ¥å¼•ç”¨<code>.bin</code>ç›®å½•ä¸­çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œè€Œæ— éœ€è®¾ç½®å®ƒä»¬çš„è·¯å¾„ã€‚</p>
<pre><code class="language-json">{
    &quot;build&quot; : &quot;gulp html&quot;, //ä¸ç”¨å†™æˆä¸‹é¢é‚£æ ·
	&quot;build&quot; : &quot;./node_modules/.bin/gulp html&quot;
}
</code></pre>
<ul>
<li>ä½¿ç”¨é€šé…ç¬¦</li>
</ul>
<p>**<code>*</code>**è¡¨ç¤ºä»»æ„æ–‡ä»¶åï¼Œ<code>**</code>è¡¨ç¤ºä»»æ„ä¸€å±‚å­ç›®å½•ã€‚</p>
<p>å¦‚æœè¦å°†é€šé…ç¬¦ä¼ å…¥åŸå§‹å‘½ä»¤ï¼Œé˜²æ­¢è¢« Shell è½¬ä¹‰ï¼Œè¦å°†æ˜Ÿå·è½¬ä¹‰ã€‚</p>
<pre><code class="language-json">{
    &quot;test&quot;: &quot;tap test/\*.js&quot;
}
</code></pre>
<ul>
<li>ä½¿ç”¨å†…éƒ¨å˜é‡</li>
</ul>
<p>npm è„šæœ¬æœ‰ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥ä½¿ç”¨ npm çš„å†…éƒ¨å˜é‡ã€‚</p>
<p>é¦–å…ˆï¼Œé€šè¿‡<code>npm_package_</code>å‰ç¼€å¯ä»¥æ‹¿åˆ°<code>package.json</code>é‡Œé¢çš„å­—æ®µã€‚æ¯”å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ª<code>package.json</code>ã€‚</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;foo&quot;, 
  &quot;version&quot;: &quot;1.2.5&quot;,
  &quot;scripts&quot;: {
    &quot;view&quot;: &quot;node view.js&quot;
  }
}
</code></pre>
<p>é‚£ä¹ˆï¼Œå˜é‡<code>npm_package_name</code>è¿”å›<code>foo</code>ï¼Œå˜é‡<code>npm_package_version</code>è¿”å›<code>1.2.5</code>ã€‚</p>
<pre><code class="language-javascript">// view.js
console.log(process.env.npm_package_name); // foo
console.log(process.env.npm_package_version); // 1.2.5
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬é€šè¿‡ç¯å¢ƒå˜é‡<code>process.env</code>å¯¹è±¡æ‹¿åˆ°<code>package.json</code>çš„å­—æ®µå€¼ã€‚å› ä¸ºæ˜¯ä¸´æ—¶PATHï¼Œæ‰€ä»¥åªåœ¨npmè„šæœ¬è¿è¡Œæ—¶æ‰æœ‰æ•ˆã€‚å¦‚æœæ˜¯Bashè„šæœ¬å¯ä»¥ç”¨<code>$npm_package_name</code>å’Œ<code>$npm_package_version</code>å–åˆ°è¿™ä¸¤ä¸ªå€¼ã€‚</p>
<p><code>npm_package_</code>å‰ç¼€ä¹Ÿæ”¯æŒåµŒå¥—çš„<code>package.json</code>å­—æ®µã€‚</p>
<pre><code class="language-javascript">{
  &quot;repository&quot;: {
    &quot;type&quot;: &quot;git&quot;,
    &quot;url&quot;: &quot;xxx&quot;
  },
  &quot;scripts&quot;: {
    &quot;view&quot;: &quot;echo $npm_package_repository_type&quot;
  }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>repository</code>å­—æ®µçš„<code>type</code>å±æ€§ï¼Œå¯ä»¥é€šè¿‡<code>npm_package_repository_type</code>å–åˆ°ã€‚</p>
<p>ä¸‹é¢æ˜¯å¦å¤–ä¸€ä¸ªä¾‹å­ã€‚</p>
<pre><code class="language-json">{
    &quot;scripts&quot;: {
  		&quot;install&quot;: &quot;foo.js&quot;
	}
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>npm_package_scripts_install</code>å˜é‡çš„å€¼ç­‰äº<code>foo.js</code>ã€‚</p>
<p>ç„¶åï¼Œnpm è„šæœ¬è¿˜å¯ä»¥é€šè¿‡<code>npm_config_</code>å‰ç¼€ï¼Œæ‹¿åˆ° npm çš„é…ç½®å˜é‡ï¼Œå³<code>npm config get xxx</code>å‘½ä»¤è¿”å›çš„å€¼ã€‚æ¯”å¦‚ï¼Œå½“å‰æ¨¡å—çš„å‘è¡Œæ ‡ç­¾ï¼Œå¯ä»¥é€šè¿‡<code>npm_config_tag</code>å–åˆ°ã€‚</p>
<pre><code class="language-json">{
    &quot;view&quot;: &quot;echo $npm_config_tag&quot;
}
</code></pre>
<p>æ³¨æ„ï¼Œ<code>package.json</code>é‡Œé¢çš„<code>config</code>å¯¹è±¡ï¼Œå¯ä»¥è¢«ç¯å¢ƒå˜é‡è¦†ç›–ã€‚</p>
<pre><code class="language-json">{ 
  &quot;name&quot; : &quot;foo&quot;,
  &quot;config&quot; : { &quot;port&quot; : &quot;8080&quot; },
  &quot;scripts&quot; : { &quot;start&quot; : &quot;node server.js&quot; }
}
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>npm_package_config_port</code>å˜é‡è¿”å›çš„æ˜¯<code>8080</code>ã€‚è¿™ä¸ªå€¼å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•è¦†ç›–ã€‚</p>
<pre><code class="language-shell">$ npm config set foo:port 80
</code></pre>
<p>æœ€åï¼Œ<code>env</code>å‘½ä»¤å¯ä»¥åˆ—å‡ºæ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚</p>
<pre><code class="language-shell">&quot;env&quot;: &quot;env&quot;
</code></pre>
<ul>
<li>é»˜è®¤çš„è„šæœ¬</li>
</ul>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œnpm è„šæœ¬ç”±ç”¨æˆ·æä¾›ã€‚ä½†æ˜¯ï¼Œnpm å¯¹ä¸¤ä¸ªè„šæœ¬æä¾›äº†é»˜è®¤å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸¤ä¸ªè„šæœ¬ä¸ç”¨å®šä¹‰ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<pre><code class="language-json">&quot;start&quot;: &quot;node server.js&quot;,
&quot;install&quot;: &quot;node-gyp rebuild&quot;
</code></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>npm run start</code>çš„é»˜è®¤å€¼æ˜¯<code>node server.js</code>ï¼Œå‰ææ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰<code>server.js</code>è¿™ä¸ªè„šæœ¬ï¼›<code>npm run install</code>çš„é»˜è®¤å€¼æ˜¯<code>node-gyp rebuild</code>ï¼Œå‰ææ˜¯é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰<code>binding.gyp</code>æ–‡ä»¶ã€‚</p>
<h3 id="æ‰§è¡Œnpmè„šæœ¬">æ‰§è¡Œnpmè„šæœ¬</h3>
<p>å¦‚æœ npm è„šæœ¬é‡Œé¢éœ€è¦æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œé‚£ä¹ˆéœ€è¦æ˜ç¡®å®ƒä»¬çš„æ‰§è¡Œé¡ºåºã€‚</p>
<p>å¦‚æœæ˜¯å¹¶è¡Œæ‰§è¡Œï¼ˆå³åŒæ—¶çš„å¹³è¡Œæ‰§è¡Œï¼‰ï¼Œå¯ä»¥ä½¿ç”¨<code>&amp;</code>ç¬¦å·ã€‚</p>
<pre><code class="language-shell">$ npm run script1.js &amp; npm run script2.js
</code></pre>
<p>å¦‚æœæ˜¯ç»§å‘æ‰§è¡Œï¼ˆå³åªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æˆåŠŸï¼Œæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨<code>&amp;&amp;</code>ç¬¦å·ã€‚</p>
<pre><code class="language-shell">$ npm run script1.js &amp;&amp; npm run script2.js
</code></pre>
<p>è¿™ä¸¤ä¸ªç¬¦å·æ˜¯ Bash çš„åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ node çš„ä»»åŠ¡ç®¡ç†æ¨¡å—ï¼š<a href="https://github.com/paulpflug/script-runner">script-runner</a>ã€<a href="https://github.com/mysticatea/npm-run-all">npm-run-all</a>ã€<a href="https://github.com/coderaiser/redrun">redrun</a>ã€‚</p>
<p>å››ä¸ªå¸¸ç”¨çš„ npm è„šæœ¬æœ‰ç®€å†™å½¢å¼ï¼š</p>
<ul>
<li><code>npm start</code>æ˜¯<code>npm run start</code></li>
<li><code>npm stop</code>æ˜¯<code>npm run stop</code>çš„ç®€å†™</li>
<li><code>npm test</code>æ˜¯<code>npm run test</code>çš„ç®€å†™</li>
<li><code>npm restart</code>æ˜¯<code>npm run stop &amp;&amp; npm run restart &amp;&amp; npm run start</code>çš„ç®€å†™</li>
</ul>
<p>@link http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html</p>
<h2 id="dependencies">dependencies</h2>
<p><code>package.json</code>ä¸­è¿˜æœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„é…ç½®é¡¹<code>dependencies</code>å’Œ<code>devDependencies</code>ç”¨æ¥æ·»åŠ é¡¹ç›®æ‰€ä¾èµ–çš„åŒ…åï¼Œåœ¨å®‰è£…åŒ…æ—¶å¯ä»¥é€šè¿‡<code>--save</code>å’Œ<code>--save-dev</code>å‚æ•°å¯ä»¥å°†å®‰è£…åŒ…å†™å…¥è¿™ä¸¤ä¸ªé…ç½®é¡¹ä¸­ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-shell"># æ§åˆ¶å°ä½¿ç”¨npm
$ npm install art-template --save
$ npm install webpack --save-dev
</code></pre>
<p>ç„¶å<code>package.json</code>ä¸­ä¼šè‡ªåŠ¨æ·»åŠ ä¸¤è¡Œï¼š</p>
<pre><code class="language-json">{
    &quot;dependencies&quot;: {
        &quot;art-template&quot;: &quot;^4.13.2&quot;
     },
    &quot;devDependencies&quot; : {
        &quot;webpack&quot; : &quot;^4.1.6&quot;
    }
}
</code></pre>
<ul>
<li>DevDependencies ï¼šè¯¥é…ç½®é¡¹åŒ…å«åœ¨<strong>å¼€å‘æ—¶</strong>éœ€è¦åŠ è½½çš„åŒ…ï¼Œè€Œä¸æ˜¯é¡¹ç›®æœ¬èº«å¿…é¡»ç”¨åˆ°çš„åŒ…ï¼Œä¾‹å¦‚ gulpã€webpackç”¨äºæ‰“åŒ…ä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸æ˜¯å±äºé¡¹ç›®è‡ªèº«ã€‚</li>
<li>dependencies : é¡¹ç›®å¼€å‘ä»¥åŠä¸Šçº¿è¿è¡Œå¿…é¡»åŠ è½½çš„åŒ…ï¼Œæ˜¯é¡¹ç›®åŠŸèƒ½æ ¸å¿ƒçš„åŒ…ã€‚</li>
</ul>
<p>å½“é¡¹ç›®ä¸­çš„node_modulesä¸¢å¤±æ—¶ å¯ä»¥é€šè¿‡<code>npm install</code>ä¸€æ¬¡æ€§æ‰¾å›ã€‚<code>npm install</code>ä¼šä¾æ®<code>package.json</code>ä¸­**<code>dependencies</code>**é€‰é¡¹æŒ¨ä¸ªæ‰§è¡Œå®‰è£…ã€‚å› æ­¤ æˆ‘ä»¬å»ºè®®æ¯ä¸ªé¡¹ç›®éƒ½æ·»åŠ ä¸€ä¸ª<code>package.json</code></p>
<h1 id="package-lockjson">package-lock.json</h1>
<p><code>npm5+</code>çš„ç‰ˆæœ¬ä¸­ï¼Œæ— éœ€æ‰‹åŠ¨<code>--save</code>ï¼Œå®ƒä¹Ÿä¼šè‡ªåŠ¨ä¿å­˜ä¾èµ–ä¿¡æ¯ã€‚é™¤æ­¤ä»¥å¤–è¿˜åŠ å…¥äº†åä¸º<code>package-lock.json</code>çš„æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶åœ¨å®‰è£…åŒ…æ—¶è‡ªåŠ¨åˆ›å»ºï¼Œä¿å­˜äº†node_modulesä¸­æ‰€æœ‰åŒ…çš„ä¿¡æ¯ï¼šç‰ˆæœ¬ã€æè¿°ä»¥åŠ<mark>ä¸‹è½½åœ°å€</mark>ï¼Œå¦‚æ­¤ä¸€æ¥å½“å†æ¬¡å®‰è£…è¯¥åŒ…æ—¶ï¼Œå®ƒçš„é€Ÿåº¦å°±ä¼šæ˜¾è‘—æå‡ã€‚</p>
<p>lockæ–‡ä»¶è¢«ç§°ä¸ºé”æ–‡ä»¶ï¼Œä¸»è¦æ˜¯é”å®šåŒ…çš„ç‰ˆæœ¬ï¼Œé¿å…ä¸‹æ¬¡é‡è£…æ—¶ä»¥æœ€æ–°ç‰ˆæœ¬æ¥ä¸‹è½½ã€‚ä¾‹å¦‚å½“å‰ä½¿ç”¨çš„æ˜¯bootstrap3ï¼Œå½“lockä¸­è®°å½•äº†è¯¥ç‰ˆæœ¬æ—¶ï¼Œä¸‹æ¬¡å®‰è£…å°±ä¸ä¼šä»¥æœ€æ–°çš„bootstrap4æ¥ä¸‹è½½ï¼Œè€Œæ˜¯ä¾ç„¶é€‰æ‹©bt3ã€‚</p>
<h1 id="npmçš„ä½¿ç”¨">npmçš„ä½¿ç”¨</h1>
<h2 id="npmå®˜ç½‘">npmå®˜ç½‘</h2>
<p><a href="www.npmjs.com">å®˜ç½‘</a>ä¸“é—¨ç”¨æ¥ç®¡ç†ç¬¬ä¸‰æ–¹åŒ…çš„å¹³å°ï¼Œæ‰€æœ‰å¯ç”¨npmå®‰è£…çš„åŒ… éƒ½éœ€è¦äº‹å…ˆæäº¤åˆ°è¯¥ç½‘ç«™ã€‚æ¥ä¸‹æ¥æ‰èƒ½åœ¨ç”¨æˆ·ä»£ç ä¸­ ä½¿ç”¨npmä¸‹è½½ã€‚å¦‚æœä½ æœ‰å…´è¶£ ä¹Ÿå¯ä»¥å‘è¯¥å¹³å°æäº¤åŒ…ã€‚</p>
<p>@link <a href="https://www.cnblogs.com/chengxs/p/7651653.html">å‘å¸ƒåŒ…çš„æµç¨‹</a></p>
<h2 id="npmæŒ‡ä»¤">npmæŒ‡ä»¤</h2>
<p>npmæ˜¯éšç€nodeä¸€èµ·å®‰è£…çš„ï¼Œå½“nodeå®‰è£…å®Œæˆnpmä¹Ÿå°±æœ‰äº†ï¼Œ å¹¶ä¸”å†™å…¥äº†ç¯å¢ƒå˜é‡ä¸­ã€‚æ¥ä¸‹æ¥åœ¨cmdçª—å£å¯ä»¥ç›´æ¥ä½¿ç”¨npmæ¥æ‰§è¡Œå‘½ä»¤ï¼š</p>
<ul>
<li>
<p><code>npm --version</code></p>
<ul>
<li>æŸ¥çœ‹npmç‰ˆæœ¬ä¿¡æ¯</li>
</ul>
</li>
<li>
<p><code>npm help</code></p>
<ul>
<li>æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©ä¿¡æ¯ï¼Œå‘½ä»¤åˆ—è¡¨</li>
<li>å‘½ä»¤æ‰‹å†Œ <code>npm install--help</code></li>
</ul>
</li>
<li>
<p><code>npm install npm --global</code></p>
<ul>
<li>å‡çº§npm</li>
<li>éœ€è¦å…¨å±€ä½¿ç”¨çš„åŒ…ï¼Œå¿…é¡»å…¨å±€å®‰è£…ï¼Œå®ƒä¼šå°†åŒ…ä¸‹è½½åˆ°ä¸€ä¸ªå·²ç»å†™å…¥äº†ç¯å¢ƒå˜é‡çš„ä½ç½®ï¼Œä¾‹å¦‚ï¼š<code>C:\Users\admin\AppData\Roaming\npm\node_modules</code> æ¥ä¸‹æ¥åœ¨ä»»æ„ä½ç½®å³å¯ä½¿ç”¨è¯¥åŒ…ã€‚</li>
</ul>
</li>
<li>
<p><code>npm init</code></p>
<ul>
<li>
<p>ä»¥å‘å¯¼å½¢å¼ åˆå§‹åŒ–<code>package.json</code>æ–‡ä»¶</p>
</li>
<li>
<p><code>npm init -y</code> åˆ™æ˜¯è·³è¿‡å‘å¯¼  ä½¿ç”¨é»˜è®¤å€¼å¿«é€Ÿç”Ÿæˆ<code>package.json</code></p>
</li>
</ul>
</li>
<li>
<p><code>npm install</code></p>
<ul>
<li>
<p>ä¸€æ¬¡æ€§å®‰è£… æ‰€æœ‰<code>depenencies</code>ä¸­çš„ä¾èµ–åŒ…</p>
</li>
<li>
<p>ç®€å†™å½¢å¼ <code>npm i</code></p>
</li>
</ul>
</li>
<li>
<p><code>npm install åŒ…å</code></p>
<ul>
<li>å®‰è£…æŒ‡å®šçš„åŒ…åˆ°node_modulesä¸­</li>
<li>ç®€å†™å½¢å¼ <code>npm i åŒ…å</code></li>
</ul>
</li>
<li>
<p><code>npm install åŒ…å --save</code></p>
<ul>
<li>å®‰è£…å¹¶å°†å†™åŒ…å†™å…¥é¡¹ç›®çš„ä¾èµ–ä¸­</li>
<li>ç®€å†™å½¢å¼ <code>npm i åŒ…å -S</code></li>
</ul>
</li>
<li>
<p><code>npm install åŒ…å --save-dev</code></p>
<ul>
<li>å®‰è£…å¹¶å°†åŒ…å†™å…¥å¼€å‘ä¾èµ–ç¯å¢ƒä¸­</li>
<li>ç®€å†™å½¢å¼ <code>npm i åŒ…å -D</code></li>
</ul>
</li>
<li>
<p><code>npm uninstall åŒ…å</code></p>
<ul>
<li>åˆ é™¤ä¸€ä¸ªåŒ…ï¼Œä¿ç•™ä¾èµ–é¡¹</li>
<li>ç®€å†™å½¢å¼ <code>npm un åŒ…å</code></li>
<li>åˆ«åï¼šrm</li>
</ul>
</li>
<li>
<p><code>npm uninstall åŒ…å--save</code></p>
<ul>
<li>åˆ é™¤ä¸€ä¸ªåŒ…ä»¥åŠä¾èµ–é¡¹</li>
<li>ç®€å†™å½¢å¼ <code>npm un åŒ…å -S</code></li>
</ul>
</li>
</ul>
<h2 id="npmé…ç½®">npmé…ç½®</h2>
<ul>
<li>
<p>ä½¿ç”¨<code>npm config list</code>æŸ¥çœ‹npmçš„åŸºæœ¬é…ç½®ä¿¡æ¯</p>
<p>å®ƒåŒ…æ‹¬æœ‰<code>cli configs</code>ã€<code>userconfig</code>ã€<code>builtin config</code>å‡ çº§é…ç½®ï¼Œé€šå¸¸ä¿®æ”¹userConfigçš„é…ç½®ã€‚userconfigé…ç½®æ–‡ä»¶åœ¨<code>c:/users/admin/.npmrc.</code>æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹è¯¥æ–‡ä»¶æ¥è®¾ç½®ç”¨æˆ·é…ç½®é¡¹</p>
</li>
<li>
<p>ä½¿ç”¨<code>npm config list -l</code>æŸ¥çœ‹npmé…ç½®çš„è¯¦ç»†ä¿¡æ¯</p>
</li>
<li>
<p><code>npm config get key</code>  è¯»å–ä¸€ä¸ªé…ç½®é¡¹çš„å€¼</p>
</li>
<li>
<p><code>npm config set key value</code> è®¾ç½®ä¸€ä¸ªé…ç½®é¡¹çš„å€¼</p>
</li>
</ul>
<h1 id="npxçš„ä½¿ç”¨">npxçš„ä½¿ç”¨</h1>
<p>npxæ˜¯npm5.2ä¹‹åå‘å¸ƒçš„ä¸€ä¸ªå‘½ä»¤ã€‚å®˜ç½‘è¯´å®ƒæ˜¯<code>execute npm package binaries</code>ï¼Œå°±æ˜¯æ‰§è¡Œnpmä¾èµ–åŒ…çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨npxæ¥æ‰§è¡Œå„ç§å‘½ä»¤ã€‚<br>
npxå®˜ç½‘ï¼š<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fnpx">https://www.npmjs.com/package/npx</a></p>
<h2 id="åŠ è½½è„šæœ¬">åŠ è½½è„šæœ¬</h2>
<p>å½“æˆ‘ä»¬åœ¨å®‰è£…ä¸€ä¸ªå‘½ä»¤è¡Œçš„å·¥å…·åŒ…æ—¶ï¼Œæƒ³è¦åœ¨æœ¬åœ°ï¼ˆå½“å‰ç›®å½•ï¼‰æ‰§è¡Œå®ƒæ—¶ï¼Œä»€ä¹ˆéƒ½ä¸åšæ—¶æ˜¯ä¸èƒ½è¿è¡Œçš„ï¼š</p>
<pre><code class="language-shell">$ npm i -D mocha
$ mocha --version
</code></pre>
<p>æƒ³è¦åœ¨æœ¬åœ°èƒ½å¤Ÿæ‰§è¡Œå®ƒçš„å‘½ä»¤ï¼Œé€šå¸¸éœ€è¦ç¬¦åˆä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š</p>
<ul>
<li>
<p>å…¨å±€å®‰è£…è¯¥åŒ…ï¼Œè‡ªåŠ¨ä¸‹è½½åˆ°å·²æ·»åŠ ç¯å¢ƒå˜é‡çš„ä½ç½®ï¼Œå¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸‹ä½¿ç”¨è¯¥åŒ…</p>
<pre><code class="language-shell">$ npm i mocha --global
</code></pre>
</li>
<li>
<p>åœ¨å‘½ä»¤è¡Œä¸­æ‰¾åˆ°è¯¥æ¨¡å—çš„äºŒè¿›åˆ¶æ–‡ä»¶è¿è¡Œï¼Œé€šå¸¸æ˜¯<code>node_modules/åŒ…å/bin/</code>ç›®å½•</p>
<pre><code class="language-shell">$ cd node_modules/mocha/bin
$ mocha --version
</code></pre>
</li>
<li>
<p>å½“å‰é¡¹ç›®çš„<code>package.json</code>æ–‡ä»¶ä¸­åˆ›å»ºnpmè„šæœ¬ï¼Œå³<code>scripts</code>ä¸­è®¾ç½®ä¸€æ¡æ‰§è¡Œè¯¥åŒ…çš„å‘½ä»¤ã€‚åŸç†æ˜¯<code>npm run</code>æ‰§è¡Œæ—¶<code>.bin</code>ç›®å½•ä¼šåŠ¨æ€æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚</p>
<pre><code class="language-json">{
    &quot;scripts&quot;: {
  		&quot;findmocha&quot;: &quot;mocha --version&quot;,
	}
}
</code></pre>
<pre><code class="language-shell">$ npm run findmocha
</code></pre>
</li>
</ul>
<p><strong>ä½¿ç”¨npxå¯ä»¥åœ¨å‘½ä»¤è¡Œç›´æ¥æ‰§è¡Œæœ¬åœ°å·²å®‰è£…çš„ä¾èµ–åŒ…å‘½ä»¤ï¼Œä¸ç”¨åœ¨scriptsè„šæœ¬å†™å…¥å‘½ä»¤</strong>ï¼Œä¹Ÿä¸ç”¨éº»çƒ¦çš„å»æ‰¾æœ¬åœ°è„šæœ¬ã€‚</p>
<pre><code class="language-shell">$ npm i -D mocha
$ npx mocha --version
</code></pre>
<p>npxçš„åŸç†ï¼Œå°±æ˜¯åœ¨è¿è¡Œå®ƒæ—¶ï¼Œæ‰§è¡Œä¸‹åˆ—æµç¨‹ï¼š</p>
<ol>
<li>
<p>å»<code>node_modules/.bin</code>è·¯å¾„æ£€æŸ¥npxåçš„å‘½ä»¤æ˜¯å¦å­˜åœ¨ï¼Œæ‰¾åˆ°ä¹‹åæ‰§è¡Œï¼›</p>
</li>
<li>
<p>æ‰¾ä¸åˆ°ï¼Œå°±å»ç¯å¢ƒå˜é‡<code>$PATH</code>é‡Œé¢ï¼Œæ£€æŸ¥npxåçš„å‘½ä»¤æ˜¯å¦å­˜åœ¨ï¼Œæ‰¾åˆ°ä¹‹åæ‰§è¡Œ;</p>
</li>
<li>
<p>è¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œè‡ªåŠ¨ä¸‹è½½ä¸€ä¸ªä¸´æ—¶çš„ä¾èµ–åŒ…æœ€æ–°ç‰ˆæœ¬åœ¨ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œç„¶åå†è¿è¡Œå‘½ä»¤ï¼Œè¿è¡Œå®Œä¹‹ååˆ é™¤ï¼Œä¸æ±¡æŸ“å…¨å±€ç¯å¢ƒã€‚</p>
</li>
</ol>
<h2 id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</h2>
<h3 id="ä¸€æ¬¡æ€§çš„å‘½ä»¤">ä¸€æ¬¡æ€§çš„å‘½ä»¤</h3>
<p>ä¸åŒå…¨å±€å®‰è£…ï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œä¸€æ¬¡æ€§å‘½ä»¤ï¼Œä¾‹å¦‚</p>
<pre><code class="language-undefined">npx create-react-app my-react-app
</code></pre>
<p>npxå°†<code>create-react-app</code>ä¸‹è½½åˆ°ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œä½¿ç”¨ä»¥åå†åˆ é™¤ã€‚<br>
æ¯æ¬¡è¿è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œéƒ½ä¼šé‡æ–°ä¸‹è½½ä¾èµ–åŒ…ï¼Œè¿è¡Œååˆ é™¤ã€‚</p>
<h3 id="åˆ‡æ¢nodeç‰ˆæœ¬">åˆ‡æ¢nodeç‰ˆæœ¬</h3>
<p>å½“ä½ æƒ³è¦è¿è¡Œçš„å‘½ä»¤ä¸å…¼å®¹å½“å‰çš„nodejsç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡npxæ¥åˆ‡æ¢ç‰ˆæœ¬ï¼ŒæŒ‡å®šæŸä¸ªç‰ˆæœ¬çš„ Node æ¥è¿è¡Œå‘½ä»¤ã€‚</p>
<p>npxçš„-pé€‰é¡¹æŒ‡å®šè¦å®‰è£…çš„åŒ…ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°æ­£åœ¨è¿è¡Œçš„$PATHä¸­ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-ruby"> npx node@6 -v
 npx node@7 -v
 npx node@8 -v
</code></pre>
<p>ä»¥ä¸Šçš„å‘½ä»¤ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½éœ€è¦çš„nodeï¼Œæ‰§è¡Œå®Œå‘½ä»¤ååˆ é™¤ã€‚</p>
<h3 id="å¼€å¯æœåŠ¡">å¼€å¯æœåŠ¡</h3>
<pre><code class="language-shell">npx http-server    #é»˜è®¤è¿”å›æ ¹ç›®å½•ä¸‹index.html
npx http-server -p 3000  #æŒ‡å®šç«¯å£
</code></pre>
<h2 id="å¸¸ç”¨æŒ‡ä»¤">å¸¸ç”¨æŒ‡ä»¤</h2>
<p>å¯ä»¥å•ç‹¬å®‰è£…npxï¼š</p>
<pre><code class="language-undefined">npm install -g npx
</code></pre>
<ul>
<li>-p</li>
</ul>
<p>-på‚æ•°ç”¨äºæŒ‡å®š npx æ‰€è¦å®‰è£…çš„æ¨¡å—</p>
<pre><code class="language-css">npx -p node@6 node -v
</code></pre>
<ul>
<li>--no-install</li>
</ul>
<p>å¼ºåˆ¶ä½¿ç”¨æœ¬åœ°æ¨¡å—ï¼Œä¸ä¸‹è½½è¿œç¨‹æ¨¡å—ï¼Œå¦‚æœæœ¬åœ°ä¸å­˜åœ¨è¯¥æ¨¡å—ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<ul>
<li>--ignore-existing</li>
</ul>
<p>å¿½ç•¥æœ¬åœ°çš„åŒåæ¨¡å—ï¼Œå¼ºåˆ¶å®‰è£…ä½¿ç”¨è¿œç¨‹æ¨¡å—</p>
<h1 id="cnpmä»£ç†">cnpmä»£ç†</h1>
<p>npmè¿œç¨‹æœåŠ¡å™¨å­˜æ”¾äºå›½å¤–ï¼Œå³ä¾¿å›½å†…æœ‰CDNä¹Ÿä¼šæ¯”è¾ƒæ…¢ï¼Œå› æ­¤å»ºè®®ä½¿ç”¨æ—¶é…ç½®å›½å†…çš„é•œåƒåœ°å€ ã€‚</p>
<p>@link http://npm.taobao.org</p>
<p>è¿™æ˜¯ä¸€ä¸ªå®Œæ•´ <code>npmjs.org</code> é•œåƒï¼Œä½ å¯ä»¥ç”¨æ­¤ä»£æ›¿å®˜æ–¹ç‰ˆæœ¬(<strong>åªè¯»</strong>)ï¼ŒåŒæ­¥é¢‘ç‡ç›®å‰ä¸º <strong>10åˆ†é’Ÿ</strong> ä¸€æ¬¡ ä»¥ä¿è¯å°½é‡ä¸å®˜æ–¹æœåŠ¡åŒæ­¥ã€‚</p>
<p>1ï¼‰å…¨å±€å®‰è£…cnpm</p>
<pre><code class="language-shell">&gt; npm install cnpm --global
</code></pre>
<p>2ï¼‰ä½¿ç”¨cnpmå®‰è£…åŒ…</p>
<pre><code class="language-shell"># ä½¿ç”¨cnpmå®‰è£…art-template
&gt; cnpm install art-template
âˆš Installed 1 packages
âˆš Linked 27 latest versions
âˆš Run 0 scripts
âˆš All packages installed (30 packages installed from npm registry, used 16s(network 16s), speed 69.44kB/s, json 28(79.46kB), tarball 1.01MB)
</code></pre>
<p>å¦‚æœä¸æƒ³å®‰è£…cnmpæœåŠ¡ è€Œåˆæƒ³ä½¿ç”¨å…¶é•œåƒæœåŠ¡å™¨ä¸‹è½½åŒ…ï¼Œåˆ™å¯ä»¥é€šè¿‡<code>--registry</code>æ¥è®¾ç½®</p>
<pre><code class="language-shell">&gt; npm install art-template --registry=https://registry.npm.taobao.org
</code></pre>
<p>æˆ–è€…ç›´æ¥ä¿®æ”¹npmé…ç½®é¡¹ä¸­ä¸‹è½½å…¥å£åœ°å€ï¼š</p>
<pre><code class="language-shell">&gt; npm config set registry https://registry.npm.taobao.org
#æŸ¥çœ‹npmé…ç½®é¡¹ä¿¡æ¯
&gt; npm config list
</code></pre>
<pre><code class="language-shell">&gt; npm config list -l
</code></pre>
<hr>
<p align="right">posted @ Zycin (éè½¬è½½ æ¥è‡ªä¸ªäººå­¦ä¹ èµ„æ–™æ•´ç†)</p>
        </div>

        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://fastt.cn/tag/node">
            <span class="flex-auto">node</span>
          </a>
        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://fastt.cn/tag/npm">
            <span class="flex-auto">npm</span>
          </a>
        
          <a class="animated fadeInUp p-2 items-center text-sm text-gray-700 border hover:bg-gray-300 leading-none rounded-full flex lg:inline-flex m-4 " href="https://fastt.cn/tag/module">
            <span class="flex-auto">module</span>
          </a>
        


        <div class="flex justify-between py-8">
          
            <div class="prev-post">
              <a href="https://fastt.cn/post/promise">
                <h3 class="post-title">
                  <i class="remixicon-arrow-left-line"></i>
                  Promiseå¼‚æ­¥ç¼–ç¨‹
                </h3>
              </a>
            </div>
          

          
            <div class="next-post">
              <a href="https://fastt.cn/post/es6">
                <h3 class="post-title">
                  ES6çš„è¯­æ³•
                  <i class="remixicon-arrow-right-line"></i>
                </h3>
              </a>
            </div>
          
        </div>

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: 'f9c4cb98113788bb94e1',
    clientSecret: 'd271ed343d3af9b71c24dff543d9c3e1e4d70a4b',
    repo: 'zycin.github.io',
    owner: 'zycin',
    admin: ['zycin'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        

      </div>
    </div>

    <script src="https://fastt.cn/media/prism.js"></script>  
<script>

Prism.highlightAll()

let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

// This should probably be throttled.
// Especially because it triggers during smooth scrolling.
// https://lodash.com/docs/4.17.10#throttle
// You could do like...
// window.addEventListener("scroll", () => {
//    _.throttle(doThatStuff, 100);
// });
// Only not doing it here to keep this Pen dependency-free.

window.addEventListener("scroll", event => {
  let fromTop = window.scrollY;

  mainNavLinks.forEach((link, index) => {
    let section = document.getElementById(decodeURI(link.hash).substring(1));
    let nextSection = null
    if (mainNavLinks[index + 1]) {
      nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
    }
    if (section.offsetTop <= fromTop) {
      if (nextSection) {
        if (nextSection.offsetTop > fromTop) {
          link.classList.add("current");
        } else {
          link.classList.remove("current");    
        }
      } else {
        link.classList.add("current");
      }
    } else {
      link.classList.remove("current");
    }
  });
});


document.addEventListener("DOMContentLoaded", function() {
  var lazyImages = [].slice.call(document.querySelectorAll(".post-feature-image.lazy"));

  if ("IntersectionObserver" in window) {
    let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          let lazyImage = entry.target
          lazyImage.style.backgroundImage = `url(${lazyImage.dataset.bg})`
          lazyImage.classList.remove("lazy")
          lazyImageObserver.unobserve(lazyImage)
        }
      });
    });

    lazyImages.forEach(function(lazyImage) {
      lazyImageObserver.observe(lazyImage)
    })
  } else {
    // Possibly fall back to a more compatible method here
  }
});

const menuContainer = document.querySelector('.menu-container')
const menus = document.querySelectorAll('.menu-container .menu')
const mask = document.querySelector('.mask')
const contentWrapper = document.querySelector('.content-wrapper')
const latestArticle = document.querySelector('.latest-article')
const readMore = document.querySelector('.read-more')
const indexPage = document.querySelector('.index-page')

const isHome = location.pathname === '/'
if (latestArticle) {
  latestArticle.style.display = isHome ? 'block' : 'none'
  readMore.style.display = isHome ? 'block' : 'none'
  indexPage.style.display = isHome ? 'none' : 'block'
}

const openMenu = () => {
  menuContainer.classList.add('open')
  menus.forEach(menu => {
    menu.classList.add('animated', 'fadeInLeft')
  })
  mask.classList.add('open')
  contentWrapper.classList.add('is-second')
}

const closeMenu = () => {
  menuContainer.classList.remove('open')
  menus.forEach(menu => {
    menu.classList.remove('animated', 'fadeInLeft')
  })
  mask.classList.remove('open')
  contentWrapper.classList.remove('is-second')
}
</script>
  
  </body>
</html>
